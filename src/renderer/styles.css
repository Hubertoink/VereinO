:root {
    --radius: 12px;
}

/* Settings layout */
.settings-container { padding: 20px; }
.settings-content { 
    overflow-y: auto;
    background: color-mix(in oklab, var(--surface) 85%, transparent);
    border: 1px solid var(--border);
    border-radius: 0 0 var(--radius) var(--radius);
    padding: 16px;
}
.settings-pane { display: grid; gap: 16px; }
.settings-pane-card { padding: 12px; }
.settings-pane-actions { margin-top: 8px; }

/* Settings Navigation - Aktenreiter (file tab) style */
.settings-tabs {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    margin-bottom: 0;
    padding-bottom: 0;
    position: relative;
}

/* Horizontal line that extends from the last tab to the right edge */
.settings-tabs::after {
    content: '';
    flex: 1;
    border-bottom: 1px solid var(--border);
    align-self: flex-end;
    margin-bottom: 0;
}

.settings-tab {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    font-size: 13px;
    font-weight: 500;
    background: color-mix(in oklab, var(--muted) 40%, transparent);
    border: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
    border-radius: var(--radius) var(--radius) 0 0;
    cursor: pointer;
    color: var(--text-dim);
    transition: background 0.15s, color 0.15s;
    margin-bottom: -1px;
}

.settings-tab:hover {
    background: color-mix(in oklab, var(--muted) 60%, transparent);
    color: var(--text);
}

.settings-tab.active {
    background: color-mix(in oklab, var(--surface) 85%, transparent);
    color: var(--text);
    font-weight: 600;
    border-bottom-color: color-mix(in oklab, var(--surface) 85%, transparent);
}

.settings-tab-icon {
    font-size: 16px;
    line-height: 1;
}

/* Settings pane layout improvements */
.settings-row-2col {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.settings-row-3col {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
}

@media (max-width: 900px) {
    .settings-row-2col,
    .settings-row-3col {
        grid-template-columns: 1fr;
    }
}

/* Inline toggle with label */
.settings-inline-toggle {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 12px;
    padding: 8px 0;
}

.settings-inline-toggle label {
    font-weight: 500;
}

/* Button group for 2-3 option toggles (segmented control) */
.btn-group {
    display: inline-flex;
    border-radius: 8px;
    overflow: hidden;
    gap: 2px;
}

.btn-group .btn-option {
    padding: 6px 14px;
    font-size: 13px;
    font-weight: 500;
    background: color-mix(in oklab, var(--muted) 40%, transparent);
    color: var(--text-dim);
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.15s, color 0.15s;
}

.btn-group .btn-option:not(:last-child) {
    border-right: none;
}

.btn-group .btn-option:hover {
    background: color-mix(in oklab, var(--muted) 70%, transparent);
    color: var(--text);
}

.btn-group .btn-option.active {
    background: var(--accent);
    color: #0B0E14;
    font-weight: 600;
}
.swatches { display: flex; gap: 8px; margin-top: 8px; }
.swatch { width: 32px; height: 32px; border-radius: 6px; border: 1px solid var(--border); }

/* Storage pane specific */
.storage-pane { display: grid; gap: 12px; }
.storage-section { padding: 12px; display: grid; gap: 8px; }
.storage-actions { display: flex; gap: 8px; flex-wrap: wrap; }
.storage-auto-settings { display: flex; gap: 12px; flex-wrap: wrap; }
.storage-backup-dir { display: flex; gap: 4px; flex-wrap: wrap; }
.storage-backup-code { font-size: 12px; word-break: break-all; }
.storage-field-min-160 { min-width: 160px; }
.storage-field-min-240 { min-width: 240px; }
.storage-data-management { display: grid; gap: 8px; }
.error-text { color: var(--danger); }

/* Modal styles */
.modal-grid { display: grid; gap: 12px; }
.modal-grid-14 { display: grid; gap: 14px; }
.modal-header { display: flex; justify-content: space-between; align-items: center; }
.modal-header h2 { margin: 0; }
.modal-actions-end { display: flex; justify-content: flex-end; gap: 8px; flex-wrap: wrap; }
.modal-actions-between { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px; }
.modal-wide { max-width: 760px; }
.modal-wider { max-width: 780px; }
.helper-danger { color: var(--danger); }
.helper-mt-neg { margin-top: -4px; }
.helper-flex-1 { flex: 1; }

/* Table comparison styles */
.compare-table { padding: 12px; display: grid; gap: 8px; }
.compare-table-10 { padding: 12px; display: grid; gap: 10px; }
.compare-header { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 8px; font-weight: 600; }
.compare-rows { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 8px; }
.compare-badge-current { background: var(--accent); color: #fff; padding: 4px 8px; border-radius: 4px; text-align: center; }
.compare-badge-target { text-align: center; }
.compare-cell { padding: 4px 8px; text-align: center; border-radius: 4px; }
.compare-cell-diff { background: rgba(255, 193, 7, 0.15); }
.compare-cell-diff-border { border: 1px solid rgba(255, 193, 7, 0.3); }
.compare-cell-diff-blue { background: rgba(33, 150, 243, 0.15); }
.compare-cell-diff-blue-border { border: 1px solid rgba(33, 150, 243, 0.3); }
.compare-cell-diff-current { background: rgba(255, 193, 7, 0.15); padding: 4px 8px; text-align: center; border-radius: 4px; font-weight: 600; border: 1px solid rgba(255, 193, 7, 0.3); }
.compare-cell-diff-target { background: rgba(33, 150, 243, 0.15); padding: 4px 8px; text-align: center; border-radius: 4px; border: 1px solid rgba(33, 150, 243, 0.3); }
.compare-no-data { grid-column: 1 / span 3; }

/* Settings: Cards and previews */
.settings-card { border: 1px solid var(--panel-border, color-mix(in oklab, var(--text)/10%, transparent)); border-radius: 10px; background: var(--surface); box-shadow: 0 1px 0 color-mix(in oklab, var(--text)/7%, transparent) inset; }
.settings-title { display: flex; align-items: center; gap: 8px; font-size: 14px; margin-bottom: 2px; }
.settings-sub { color: color-mix(in oklab, var(--text)/68%, transparent); font-size: 12px; margin-bottom: 10px; }
.muted-sep { height: 1px; background: color-mix(in oklab, var(--text)/10%, transparent); margin: 12px 0; }

/* Generic table styling */
.table { width: 100%; border-collapse: collapse; }
.table th, .table td { padding: 12px 16px; text-align: left; }
.table th { font-weight: 600; color: var(--text-dim); font-size: 13px; border-bottom: 1px solid var(--border); }
.table td { border-bottom: 1px solid var(--border); }
.table tbody tr:hover { background: color-mix(in oklab, var(--accent)/5%, transparent); }

/* InvoicesView utility classes */
.invoices-text-danger { color: var(--danger); }
.invoices-table { width: 100%; border-collapse: separate; border-spacing: 0; }
.invoices-table th:last-child, .invoices-table td:last-child { width: 1%; white-space: nowrap; }
.invoices-table td { vertical-align: middle; }
.invoices-sort-btn { padding: 0; display: inline-flex; gap: 6px; align-items: center; }
.invoices-sort-icon { color: var(--text-dim); }
.invoices-sort-icon-active { color: var(--warning); }
.invoices-type-badge { background: var(--danger); color: white; padding: 2px 6px; }
.invoices-type-badge-in { background: var(--success); }
.invoices-tags-container { display: flex; gap: 6px; flex-wrap: wrap; }
.invoices-rest-danger { color: var(--danger); }
.invoices-rest-success { color: var(--success); }
.invoices-actions-nowrap { white-space: nowrap; }
.invoices-payment-add { background: var(--success); color: #fff; }
.invoices-modal-grid { display: grid; gap: 10px; width: min(1300px, 96vw); max-height: 90vh; overflow: auto; }
.invoices-form-header { padding: 10px; display: grid; gap: 8px; }
.invoices-form-header-top { display: flex; justify-content: space-between; align-items: center; gap: 8px; flex-wrap: wrap; }
.invoices-form-header-info { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
.invoices-form-header-actions { display: flex; gap: 6px; align-items: center; }
.invoices-form-header-helper { display: flex; gap: 10px; flex-wrap: wrap; }
.invoices-form-grid { display: grid; grid-template-columns: minmax(320px, 3fr) minmax(320px, 2fr); gap: 12px; }
.invoices-form-card { padding: 12px; display: grid; gap: 10px; }
.invoices-left-grid { display: grid; grid-template-columns: minmax(220px, 1fr) minmax(220px, 1fr); gap: 10px; align-items: end; }
.invoices-form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 8px; }
.invoices-form-field-160 { min-width: 160px; }
.invoices-form-field-180 { min-width: 180px; }
.invoices-form-field-span2 { grid-column: 1 / span 2; }
.invoices-tags-narrow { max-width: 540px; }
.invoices-form-footer { display: flex; justify-content: space-between; align-items: center; gap: 8px; }
.invoices-form-footer-actions { display: flex; gap: 8px; }
.invoices-detail-grid { display: grid; gap: 12px; }
.invoices-detail-header { display: flex; justify-content: space-between; align-items: center; gap: 8px; }
.invoices-detail-header-actions { display: flex; gap: 6px; }
.invoices-detail-overview { display: flex; justify-content: space-between; align-items: center; gap: 8px; flex-wrap: wrap; }
.invoices-detail-overview-left { display: grid; gap: 4px; }
.invoices-detail-info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 8px; margin-top: 8px; }
.invoices-detail-tags { display: flex; gap: 6px; flex-wrap: wrap; margin-top: 8px; }
.invoices-detail-split { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.invoices-detail-footer { display: flex; justify-content: flex-end; }
.invoices-payment-modal { display: grid; gap: 10px; max-width: 520px; }
.invoices-payment-actions { display: flex; justify-content: flex-end; gap: 8px; }
.invoices-missing-modal { max-width: 520px; display: grid; gap: 10px; }
.invoices-missing-list { margin-top: 6px; }
.invoices-missing-actions { display: flex; justify-content: flex-end; gap: 8px; }

/* Tiny table preview */
/* Inline label + control */
.label-row { display: flex; align-items: center; justify-content: flex-start; gap: 8px; }

/* Accent Toggle (checkbox[role=switch]) - robust rendering */
input[type="checkbox"].toggle {
    -webkit-appearance: none !important;
    appearance: none !important;
    position: relative;
    display: inline-block !important;
    vertical-align: middle;
    width: 44px !important;
    height: 24px !important;
    min-width: 44px;
    min-height: 24px;
    border-radius: 999px !important;
    /* Use accent tint even in OFF state for visibility */
    background: linear-gradient(180deg, color-mix(in oklab, var(--accent) 30%, var(--surface)), color-mix(in oklab, var(--accent) 22%, var(--surface))) !important;
    border: 1px solid color-mix(in oklab, var(--accent) 55%, var(--surface)) !important;
    box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--bg)/50%, transparent) !important;
    background-clip: padding-box;
    cursor: pointer !important;
    transition: background .15s ease, border-color .15s ease;
    flex-shrink: 0;
    padding: 0 !important;
    margin: 0;
}
/* Hover/active affordances */
input[type="checkbox"].toggle:hover { border-color: var(--accent) !important; }
input[type="checkbox"].toggle:active::after { transform: translateX(0) scale(0.96); }
input[type="checkbox"].toggle::after {
    content: "";
    position: absolute;
    top: 2px;
    left: 2px;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, color-mix(in oklab, #ffffff 88%, var(--bg) 5%), color-mix(in oklab, #f6f8fb 82%, var(--bg) 8%));
    box-shadow: 0 1px 2px rgba(0,0,0,.35);
    transition: transform .15s ease;
}
input[type="checkbox"].toggle:checked {
    background: linear-gradient(180deg, color-mix(in oklab, var(--accent) 92%, var(--surface)), color-mix(in oklab, var(--accent) 80%, var(--surface))) !important;
    border-color: var(--accent) !important;
}
input[type="checkbox"].toggle:checked::after { transform: translateX(20px); }
input[type="checkbox"].toggle:focus-visible {
    outline: none !important;
    box-shadow: 0 0 0 2px color-mix(in oklab, var(--accent)/60%, transparent) !important;
}
input[type="checkbox"].toggle:disabled { opacity: .6; cursor: not-allowed !important; }

/* Theme swatches */
.swatches { display: inline-flex; gap: 6px; margin-top: 6px; }
.swatch { width: 18px; height: 12px; border-radius: 3px; border: 1px solid color-mix(in oklab, var(--text)/15%, transparent); box-shadow: 0 1px 0 color-mix(in oklab, var(--text)/10%, transparent) inset; }

:root[data-theme="dark"] {
    --bg: #0F1115;
    --surface: #151821;
    --muted: #1C2028;
    --border: #2B3240;
    --text: #E7EAF0;
    --text-dim: #AAB3C2;
    --accent: #6AA6FF;
    --accent-hover: #8BB9FF;
    --success: #4CC38A;
    --warning: #F5C451;
    --danger: #F06A6A;
    /* Ensure native form controls (date picker, selects, scrollbars) use dark palette */
    color-scheme: dark;
    /* Badge and semantic intensities */
    --badge-text: #E7EAF0;
    --badge-in: #4CC38A;
    --badge-out: #F06A6A;
    --success-strong: #2e7d32;
    --danger-strong: #c62828;
    --transfer-strong: #b8860b;
    /* Domain-specific swatches */
    --sphere-ideell: #6AA6FF;
    --sphere-zweck: #F5C451;
    --sphere-vermoegen: #AAB3C2;
    --sphere-wgb: #8BB9FF;
    --pm-bar: #A2E5A0;
    --pm-bank: #A0D6FF;
    --shadow-1: 0 4px 16px rgba(0, 0, 0, 0.25);
    --blur: saturate(180%) blur(10px);
    /* Tables */
    --table-row-alt: color-mix(in oklab, var(--muted) 35%, transparent);
    --table-row-sep: color-mix(in oklab, var(--border) 120%, transparent);
}

:root[data-theme="light"] {
    --bg: #F6F7F9;
    --surface: #FFFFFF;
    --muted: #EEF1F4;
    --border: #DDE2EA;
    --text: #1B2430;
    --text-dim: #5D697A;
    --accent: #6AA6FF;
    --accent-hover: #8BB9FF;
    --success: #4CC38A;
    --warning: #F5C451;
    --danger: #F06A6A;
    color-scheme: light;
    /* Badge and semantic intensities */
    --badge-text: #0B0E14;
    --badge-in: #4CC38A;
    --badge-out: #F06A6A;
    --success-strong: #2e7d32;
    --danger-strong: #c62828;
    --transfer-strong: #b8860b;
    /* Domain-specific swatches */
    --sphere-ideell: #6AA6FF;
    --sphere-zweck: #F5C451;
    --sphere-vermoegen: #AAB3C2;
    --sphere-wgb: #8BB9FF;
    --pm-bar: #A2E5A0;
    --pm-bank: #A0D6FF;
    --shadow-1: 0 4px 16px rgba(0, 0, 0, 0.15);
    --blur: saturate(180%) blur(10px);
    /* Tables */
    --table-row-alt: color-mix(in oklab, var(--muted) 40%, transparent);
    --table-row-sep: color-mix(in oklab, var(--border) 130%, transparent);
}

/* Color theme palettes (override accent colors). Applied via data-color-theme on <html>. */
:root[data-color-theme="default"] {
    --accent: #6AA6FF;
    --accent-hover: #8BB9FF;
}

/* Fiery Ocean */
:root[data-color-theme="fiery-ocean"] {
    /* Palette: barn red, fire brick, papaya whip, prussian blue, air superiority blue */
    --bg: #0e0f14; /* deepened backdrop */
    --surface: #141720;
    --muted: #1c2030;
    --border: #2a3142;
    --text: #EAEAF0;
    --text-dim: #A9B0BF;
    --accent: #669BBC; /* air-superiority-blue */
    --accent-hover: #8DB2CA;
    --success: #4CC38A;
    --warning: #F5C451;
    --danger: #C1121F; /* fire brick */
    --badge-in: #4CC38A;
    --badge-out: #C1121F;
    --sphere-ideell: #669BBC;
    --sphere-zweck: #F5C451;
    --sphere-vermoegen: #AAB3C2;
    --sphere-wgb: #003049; /* prussian blue */
    --pm-bar: #A2E5A0;
    --pm-bank: #669BBC;
}

/* Peachy Delight */
:root[data-color-theme="peachy-delight"] {
    --bg: #18191C;
    --surface: #1F2126;
    --muted: #262933;
    --border: #343A46;
    --text: #F2EEF1;
    --text-dim: #C9C1C6;
    --accent: #F4ACB7; /* cherry-blossom-pink */
    --accent-hover: #FFE5D9; /* champagne-pink */
    --success: #79c59a;
    --warning: #f1c27b;
    --danger: #9D8189; /* mountbatten-pink for harmony */
    --badge-in: #79c59a;
    --badge-out: #9D8189;
    --sphere-ideell: #F4ACB7;
    --sphere-zweck: #FFE5D9;
    --sphere-vermoegen: #C9C1C6;
    --sphere-wgb: #9D8189;
    --pm-bar: #bfe6c6;
    --pm-bank: #ffd3df;
}

/* Pastel Dreamland Adventure */
:root[data-color-theme="pastel-dreamland"] {
    --bg: #0E1116;
    --surface: #151922;
    --muted: #1B2030;
    --border: #2A3142;
    --text: #E8ECF2;
    --text-dim: #B6C0CF;
    --accent: #A2D2FF; /* light-sky-blue */
    --accent-hover: #BDE0FE; /* uranian-blue */
    --success: #6fd3a3;
    --warning: #f0cd7b;
    --danger: #ffafcc; /* carnation pink */
    --badge-in: #6fd3a3;
    --badge-out: #ffafcc;
    --sphere-ideell: #cdb4db; /* thistle */
    --sphere-zweck: #ffc8dd; /* fairy tale */
    --sphere-vermoegen: #bde0fe; /* uranian */
    --sphere-wgb: #a2d2ff; /* light sky blue */
    --pm-bar: #b9f3d2;
    --pm-bank: #c5e3ff;
}

/* Ocean Breeze */
:root[data-color-theme="ocean-breeze"] {
    --bg: #090B16;
    --surface: #0E1120;
    --muted: #131833;
    --border: #1C2445;
    --text: #E6F2FF;
    --text-dim: #B6D0EA;
    --accent: #00B4D8; /* pacific-cyan */
    --accent-hover: #90E0EF; /* non-photo-blue */
    --success: #55d1a0;
    --warning: #e9c15f;
    --danger: #FF6B6B;
    --badge-in: #55d1a0;
    --badge-out: #FF6B6B;
    --sphere-ideell: #0077B6; /* honolulu-blue */
    --sphere-zweck: #00B4D8; /* pacific-cyan */
    --sphere-vermoegen: #90E0EF; /* non-photo-blue */
    --sphere-wgb: #CAF0F8; /* light-cyan */
    --pm-bar: #90E0EF;
    --pm-bank: #00B4D8;
}

/* Earthy Tones */
:root[data-color-theme="earthy-tones"] {
    /* Palette inspiration: cherry-blossom-pink, champagne-pink, timberwolf, ash-gray, outer-space */
    --bg: #0F1211; /* deep charcoal with a hint of green */
    --surface: #151A18;
    --muted: #1C2421;
    --border: #2B3531;
    --text: #EDEAE5; /* warm off-white */
    --text-dim: #CFCBC3; /* muted timberwolf */
    --accent: #EDAFB8; /* cherry-blossom-pink */
    --accent-hover: #F7E1D7; /* champagne-pink */
    --success: #7FB685; /* sage */
    --warning: #D2B48C; /* tan */
    --danger: #B56576; /* muted rose */
    --badge-in: #7FB685;
    --badge-out: #B56576;
    --sphere-ideell: #EDAFB8; /* accent */
    --sphere-zweck: #D2B48C; /* tan */
    --sphere-vermoegen: #DEDBD2; /* timberwolf */
    --sphere-wgb: #4A5759; /* outer-space */
    --pm-bar: #B0C4B1; /* ash-gray */
    --pm-bank: #EDAFB8; /* accent */
}

/* Monochrome Harmony */
:root[data-color-theme="monochrome-harmony"] {
    /* Provided palette:
       --platinum: #cfdbd5ff;
    --alabaster: #e8eddfff;
    --saffron: #f5cb5cff;
    --eerie-black: #242423ff;
    --jet: #333533ff; */
    --bg: #242423;         /* eerie black */
    --surface: #333533;    /* jet */
    --muted: #2B2D2B;      /* slightly darker blend for controls */
    --border: #3E423E;     /* subtle edge */
    --text: #E8EDDF;       /* alabaster */
    --text-dim: #CFDBD5;   /* platinum */
    --accent: #F5CB5C;     /* saffron */
    --accent-hover: #ffd987; /* lighter saffron */
    --success: #8BC34A;    /* harmonious green accent */
    --warning: #F5CB5C;    /* saffron */
    --danger: #E57373;     /* soft red */
    --badge-in: #8BC34A;
    --badge-out: #E57373;
    --sphere-ideell: #F5CB5C; /* accent */
    --sphere-zweck: #CFDBD5;  /* platinum */
    --sphere-vermoegen: #E8EDDF; /* alabaster */
    --sphere-wgb: #333533;  /* jet */
    --pm-bar: #CFDBD5;      /* soft neutral */
    --pm-bank: #F5CB5C;     /* accent */
}

/* Soft Blush */
:root[data-color-theme="soft-blush"] {
    /* Pastel palette with warm peachy tones */
    --bg: #FAE1DD;         /* soft-blush background */
    --surface: #FFFFFF;    /* white for better table contrast */
    --muted: #F8EDEB;      /* seashell for muted elements */
    --border: #E8CFCA;     /* darker border for visibility */
    --text: #1B1615;       /* dark brown for contrast */
    --text-dim: #6B5C58;   /* muted brown */
    --accent: #e4431b;     /* kept accent */
    --accent-hover: #FEC89A; /* peach-glow */
    --success: #5A9D60;    /* darker sage green */
    --warning: #E5BA4A;    /* darker warm gold */
    --danger: #E8654F;     /* darker powder-blush */
    --badge-in: #5A9D60;
    --badge-out: #E8654F;
    --sphere-ideell: #FE9F67; /* darker peach */
    --sphere-zweck: #FEC89A;  /* peach-glow */
    --sphere-vermoegen: #D5D5D1; /* darker alabaster-grey */
    --sphere-wgb: #C0D3CD;    /* darker alabaster-grey-2 */
    --pm-bar: #C0D3CD;     /* darker grey */
    --pm-bank: #FE9F67;    /* darker peach */
    --shadow-1: 0 2px 8px rgba(252, 197, 187, 0.15);
    --table-row-alt: rgba(255, 229, 217, 0.35);
    --table-row-sep: rgba(232, 207, 202, 1);
    color-scheme: light;
}

/* Professional Light */
:root[data-color-theme="professional-light"] {
    /* Dezentes, professionelles Light Theme */
    --bg: #F4F3F1;         /* warmes Off-White - ged√§mpfter Hintergrund */
    --surface: #FAFAF8;    /* leicht get√∂ntes Wei√ü f√ºr Karten */
    --muted: #BEE3DB;      /* frozen-water - helles T√ºrkis */
    --border: #89B0AE;     /* muted-teal - ged√§mpftes T√ºrkis */
    --text: #2A2E33;       /* dunkles Grau f√ºr Text */
    --text-dim: #555B6E;   /* blue-slate - ged√§mpftes Blaugrau */
    --accent: #6B8F8D;     /* abgeleitet von muted-teal, etwas dunkler */
    --accent-hover: #89B0AE; /* muted-teal */
    --success: #5A9D60;    /* professionelles Gr√ºn */
    --warning: #D4A574;    /* warmes Beige */
    --danger: #C97064;     /* ged√§mpftes Rot */
    --badge-in: #5A9D60;
    --badge-out: #C97064;
    --sphere-ideell: #7BA5A3; /* T√ºrkis-Ton */
    --sphere-zweck: #FFD6BA;  /* peach-fuzz - warmer Akzent */
    --sphere-vermoegen: #BEE3DB; /* frozen-water */
    --sphere-wgb: #89B0AE;    /* muted-teal */
    --pm-bar: #BEE3DB;     /* frozen-water */
    --pm-bank: #7BA5A3;    /* T√ºrkis */
    --shadow-1: 0 2px 8px rgba(85, 91, 110, 0.12);
    --table-row-alt: rgba(190, 227, 219, 0.25);
    --table-row-sep: rgba(137, 176, 174, 0.3);
    color-scheme: light;
}

/* Vintage Charm */
:root[data-color-theme="vintage-charm"] {
    /* Provided palette:
       --rich-black: #04151f;
       --dark-slate-gray: #183a37;
       --wheat: #efd6ac;
       --mahogany: #c44900;
       --dark-purple: #432534; */
    --bg: #04151F;           /* rich black */
    --surface: #183A37;      /* dark slate gray */
    --muted: #0E2426;        /* deeper surface for controls */
    --border: #22514D;       /* slightly brighter edge */
    --text: #EFD6AC;         /* wheat */
    --text-dim: color-mix(in oklab, #EFD6AC 70%, #183A37); /* muted wheat */
    --accent: #C44900;       /* mahogany */
    --accent-hover: #D85A12; /* lighter mahogany */
    --success: #73C088;      /* soft green that fits vintage */
    --warning: #EFC46E;      /* warm gold */
    --danger: #C86C86;       /* vintage rose */
    --badge-in: #73C088;
    --badge-out: #C86C86;
    --sphere-ideell: #C44900;  /* accent */
    --sphere-zweck: #EFD6AC;   /* wheat */
    --sphere-vermoegen: #432534;/* dark purple */
    --sphere-wgb: #183A37;     /* dark slate */
    --pm-bar: #EFD6AC;        /* wheat */
    --pm-bank: #C44900;       /* accent */
}

html,
body,
#root {
    height: 100%;
    min-width: 1264px; /* safety net: matches BrowserWindow minWidth incl. left sidebar */
}

body {
    margin: 0;
    background: var(--bg);
    color: var(--text);
    font-family: Inter, "Plus Jakarta Sans", Segoe UI, system-ui, -apple-system, sans-serif;
    line-height: 1.4;
}

h1 {
    font-size: 24px;
    margin: 0 0 8px;
}

h2 {

/* Subtle hover highlight for buttons used in Setup Wizard */
.btn.hover-highlight:hover {
    background: color-mix(in oklab, var(--accent) 16%, transparent);
    box-shadow: 0 0 0 1px color-mix(in oklab, var(--accent) 30%, transparent) inset;
    transition: background 120ms ease, box-shadow 120ms ease;
}
    font-size: 18px;
    margin: 24px 0 8px;
}

code,
pre {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
}

.container {
    padding: 16px 24px;
}

/* Scrollbar styling: darker track and subtle thumb to match theme */
:root {
    /* Firefox */
    scrollbar-width: thin;
    scrollbar-color: color-mix(in oklab, var(--text) 25%, transparent) color-mix(in oklab, var(--surface) 92%, transparent);
}

/* Chromium/WebKit */
*::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}
*::-webkit-scrollbar-track {
    background: color-mix(in oklab, var(--surface) 92%, transparent);
    border-radius: 10px;
}
*::-webkit-scrollbar-thumb {
    background: color-mix(in oklab, var(--text) 25%, transparent);
    border-radius: 10px;
    border: 2px solid transparent; /* creates some spacing from edges */
    background-clip: padding-box;
}
*::-webkit-scrollbar-thumb:hover {
    background: color-mix(in oklab, var(--text) 35%, transparent);
}
*::-webkit-scrollbar-thumb:active {
    background: color-mix(in oklab, var(--accent) 40%, var(--text) 20%);
}
*::-webkit-scrollbar-corner {
    background: color-mix(in oklab, var(--surface) 92%, transparent);
}

.btn {
    border: 0;
    border-radius: 10px;
    padding: 8px 12px; /* default buttons with label */
    font-weight: 600;
    background: var(--muted);
    color: var(--text);
    cursor: pointer;
}

/* Icon-only buttons: remove padding so focus/hover outline centers on icon square */
.btn.icon,
.btn.ghost[style*="place-items: center"],
.btn.danger[style*="place-items: center"] {
    padding: 0;
}

.btn.primary {
    background: var(--accent);
    color: #0B0E14;
}

.btn.primary:hover {
    background: var(--accent-hover);
}

.btn-accent {
    background: var(--accent);
    color: #000;
}

.btn.ghost {
    background: transparent;
}

.btn.danger {
    background: color-mix(in oklab, var(--danger) 45%, transparent);
    color: #fff;
}

.btn.danger:hover {
    background: color-mix(in oklab, var(--danger) 60%, transparent);
}

/* Edit button animation - slight tilt on hover */
.btn-edit {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s ease;
}

.btn-edit:hover {
    transform: rotate(-12deg);
}

.btn-edit:active {
    transform: rotate(-8deg) scale(0.95);
}

.card {
    background: color-mix(in oklab, var(--surface) 85%, transparent);
    -webkit-backdrop-filter: var(--blur);
    backdrop-filter: var(--blur);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: var(--shadow-1);
    padding: 16px;
}

/* Prevent nested cards or long lists inside tiles from visually "growing" the tile without bounds */
.card .card {
    background: color-mix(in oklab, var(--surface) 92%, transparent);
}

/* Constrain dashboard mini-tables inside tiles */
.card table {
    width: 100%;
}

.badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 999px;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.3px;
    border: 0; /* keep badges flat */
}

/* Ensure clickable badges (rendered as <button class="badge">) stay flat and accessible */
button.badge {
    -webkit-appearance: none;
    appearance: none;
    border: 0;
    background: transparent; /* background is set via inline style or variant classes */
    cursor: pointer;
}
button.badge::-moz-focus-inner { border: 0; }
button.badge:focus { outline: none; }
button.badge:focus-visible {
    /* subtle focus ring that matches theme without 3D look */
    box-shadow: 0 0 0 2px color-mix(in oklab, var(--accent) 38%, transparent);
}
button.badge:hover { filter: brightness(1.03); }

.badge.in,
.badge.out,
.badge.transfer {
    padding: 1px 5px;
    font-size: 10px;
    font-weight: 700;
    letter-spacing: 0.2px;
}

.badge.in {
    background: color-mix(in oklab, var(--badge-in) 25%, transparent);
    color: var(--badge-text);
}

.badge.out {
    background: color-mix(in oklab, var(--badge-out) 25%, transparent);
    color: var(--badge-text);
}

.badge.transfer {
    background: color-mix(in oklab, var(--accent) 25%, transparent);
    color: var(--badge-text);
}

.badge.sphere-ideell {
    background: color-mix(in oklab, var(--sphere-ideell) 75%, transparent);
    color: #1B1615;
    font-weight: 600;
}

.badge.sphere-zweck {
    background: color-mix(in oklab, var(--sphere-zweck) 75%, transparent);
    color: #1B1615;
    font-weight: 600;
}

.badge.sphere-vermoegen {
    background: color-mix(in oklab, var(--sphere-vermoegen) 75%, transparent);
    color: #1B1615;
    font-weight: 600;
}

.badge.sphere-wgb {
    background: color-mix(in oklab, var(--sphere-wgb) 75%, transparent);
    color: #1B1615;
    font-weight: 600;
}

.badge.pm-bar {
    background: color-mix(in oklab, var(--pm-bar) 36%, transparent);
    color: #0f2a14;
}

.badge.pm-bank {
    background: color-mix(in oklab, var(--pm-bank) 36%, transparent);
    color: #0B0E14;
}

/* Transfer badge with colored payment method icons */
.badge.pm-transfer {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    background: linear-gradient(90deg, 
        color-mix(in oklab, var(--pm-bar) 30%, transparent) 0%, 
        color-mix(in oklab, var(--pm-bank) 30%, transparent) 100%);
    padding: 4px 8px;
}

.badge.pm-transfer .pm-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.badge.pm-transfer .pm-bar-icon {
    color: #0f2a14;
}

.badge.pm-transfer .pm-bank-icon {
    color: #0B0E14;
}

.badge.pm-transfer .transfer-arrow {
    color: var(--text-dim);
    font-size: 10px;
}

/* Force SVG icons inside payment badges to use a lighter stroke for better contrast */
.badge.pm-bar svg,
.badge.pm-bank svg {
    stroke: color-mix(in oklab, var(--text) 36%, var(--surface) 0%);
}

/* Make SVG icons inside badges align nicely */
.badge svg {
    display: block;
}
.badge .icon-inline {
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

table {
    width: 100%;
    border-collapse: collapse;
}

/* Journal table: prevent overflow, ensure columns fit */
.journal-table {
    table-layout: fixed;
    width: 100%;
}

/* Column width hints for journal table */
.journal-table th:nth-child(1), /* Aktionen */
.journal-table td:nth-child(1) { width: 60px; }

.journal-table th,
.journal-table td {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Allow description column to wrap and take remaining space */
.journal-table td:has(> div) { /* Description cell with tags */
    white-space: normal;
    overflow: visible;
}

th,
td {
    border-bottom: 1px solid var(--border);
}


.journal-table th,
.journal-table td {
    border-bottom: 1px solid var(--table-row-sep);
}

.journal-table tbody tr:nth-child(even) {
    background: var(--table-row-alt);
}

tbody tr:hover,
tbody tr:nth-child(even):hover {
    background: color-mix(in oklab, var(--accent) 12%, transparent) !important;
}

/* Row layout toggles for Buchungen (journal) via root data attributes */
/* Default (no attribute or 'both'): keep lines and zebra as defined above */
/* Only lines: remove zebra background */
:root[data-journal-row-style="lines"] .journal-table tbody tr:nth-child(even) { background: transparent; }
/* Make lines more pronounced in 'lines' mode */
:root[data-journal-row-style="lines"] .journal-table th,
:root[data-journal-row-style="lines"] .journal-table td {
    /* Match invoice table look: thin and not bright */
    border-bottom-color: var(--border);
    border-bottom-style: solid;
    border-bottom-width: 1px;
}
/* Only zebra: remove row separators */
:root[data-journal-row-style="zebra"] .journal-table th,
:root[data-journal-row-style="zebra"] .journal-table td { border-bottom: 0; }
/* None: no zebra and no separators */
:root[data-journal-row-style="none"] .journal-table th,
:root[data-journal-row-style="none"] .journal-table td { border-bottom: 0; }
:root[data-journal-row-style="none"] .journal-table tbody tr:nth-child(even) { background: transparent; }

/* Slightly strengthen lines when both zebra + lines are active */
:root[data-journal-row-style="both"] .journal-table th,
:root[data-journal-row-style="both"] .journal-table td {
    /* Same subtle separator as invoice table */
    border-bottom-color: var(--border);
    border-bottom-style: solid;
    border-bottom-width: 1px;
}

/* Density control: compact reduces cell padding */
:root[data-journal-row-density="compact"] .journal-table th,
:root[data-journal-row-density="compact"] .journal-table td { padding-top: 2px; padding-bottom: 2px; }

/* Resizable table columns */
.resizable-table {
    table-layout: fixed;
    max-width: 100%;
    width: 100%;
}
.resizable-th {
    position: relative;
}
.col-resize-handle {
    position: absolute;
    right: 0;
    top: 0;
    width: 6px;
    height: 100%;
    cursor: col-resize;
    background: transparent;
    z-index: 5;
    user-select: none;
    border-right: 1px solid var(--border);
    opacity: 0.5;
    transition: opacity 0.15s, border-color 0.15s;
}
.col-resize-handle:hover,
.col-resize-handle.resizing {
    border-right-color: var(--accent);
    opacity: 1;
}

/* Sticky headers for Buchungen (journal) and Verbindlichkeiten tables */
.journal-table thead th,
.invoices-table thead th {
    position: sticky;
    top: -16px;
    background: var(--surface);
    z-index: 2;
}
/* Bottom accent line using ::after pseudo-element */
.journal-table thead th::after,
.invoices-table thead th::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 1.5px;
    background: var(--accent);
    z-index: 3;
}
/* Enhanced shadow when scrolling to make header stand out */
.journal-table thead th { 
    box-shadow: 
        0 2px 8px -1px rgba(0,0,0,0.2),
        0 4px 12px -2px rgba(0,0,0,0.15),
        0 1px 0 0 var(--table-row-sep); 
}
.invoices-table thead th { 
    box-shadow: 
        0 2px 8px -1px rgba(0,0,0,0.2),
        0 4px 12px -2px rgba(0,0,0,0.15),
        0 1px 0 0 var(--border); 
}

/* Brutto colorization in journal table */
td.gross-in {
    color: var(--success-strong);
    /* vibrant green */
    font-weight: 600;
}

td.gross-out {
    color: var(--danger-strong);
    /* vibrant red */
    font-weight: 600;
}

td.gross-transfer {
    color: var(--transfer-strong);
    /* dark goldenrod for visibility on both themes */
    font-weight: 700;
}

/* Sort indicator icons for table headers/buttons */
.sort-icon {
    display: inline-block;
    font-size: 0.9em;
    opacity: 0.9;
    margin-left: 4px;
}
.sort-icon.inactive {
    opacity: 0.6;
}

/* Transfer amount input highlight */
.input-transfer {
    background: color-mix(in oklab, var(--warning) 20%, var(--surface));
    border-color: color-mix(in oklab, var(--warning) 40%, var(--border));
}

/* Ensure SVG chart labels use app text color */
svg text {
    fill: var(--text);
}

.modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    /* Ensure overlay sits above header (z-index: 1000), FAB (3000), and most overlays */
    z-index: 5000; /* below toasts (9999) */
    animation: modalFadeIn 0.2s ease-out;
}

@keyframes modalFadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes modalSlideUp {
    from {
        opacity: 0;
        transform: translateY(16px) scale(0.98);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* Tax Exemption Modal (refactored from inline styles) */
.taxex-overlay {
    background: color-mix(in oklab, var(--surface) 65%, transparent);
    padding: 24px 16px;
    overflow-y: auto;
    animation: modalFadeIn 0.2s ease-out;
}
.taxex-modal {
    width: min(920px, 96vw);
    max-height: 92vh;
    display: flex;
    flex-direction: column;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.25);
    background: var(--surface);
    animation: modalSlideUp 0.25s ease-out;
}
.taxex-header { margin-bottom: 16px; display: flex; justify-content: space-between; align-items: center; }
.taxex-title { margin: 0; font-size: 18px; }
.taxex-close-btn { font-size: 20px; }
.taxex-loading { display: flex; align-items: center; justify-content: center; padding: 48px; color: var(--text-dim); }
.taxex-error { color: var(--danger); margin-bottom: 12px; }
.taxex-empty { border: 2px dashed var(--border); border-radius: 8px; padding: 48px; text-align: center; color: var(--text-dim); }
.taxex-empty-icon { font-size: 48px; margin-bottom: 16px; }
.taxex-empty-title { margin-bottom: 8px; }
.taxex-empty-helper { margin-bottom: 16px; }
.taxex-cert-layout { display: flex; flex-direction: column; gap: 16px; flex: 1; min-height: 0; }
.taxex-file-grid { display: grid; gap: 8px; }
.taxex-file-row { display: flex; justify-content: space-between; align-items: center; }
.taxex-actions { display: flex; gap: 8px; flex-wrap: wrap; }
.taxex-preview { flex: 1; border: 1px solid var(--border); border-radius: 8px; overflow: hidden; min-height: 260px; max-height: 50vh; display: flex; align-items: center; justify-content: center; background: var(--background); position: relative; }
.taxex-preview-img { max-width: 100%; max-height: 100%; object-fit: contain; }
.taxex-preview-message { text-align: center; color: var(--text-dim); }
.taxex-icon-64 { font-size: 64px; line-height: 1; margin-bottom: 12px; }
.taxex-icon-56 { font-size: 56px; line-height: 1; margin-bottom: 12px; }
.taxex-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border); }
.taxex-shortcut-hint { font-size: 12px; }
.min-h-0 { min-height: 0; }
.mb-16 { margin-bottom: 16px; }
.mb-12 { margin-bottom: 12px; }
.p-48 { padding: 48px; }

.modal {
    width: min(900px, 96vw);
    background: color-mix(in oklab, var(--surface) 80%, transparent);
    -webkit-backdrop-filter: var(--blur);
    backdrop-filter: var(--blur);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: var(--shadow-1);
    padding: 16px;
    max-height: 80vh;
    overflow: auto;
    animation: modalSlideUp 0.25s ease-out;
}

/* Wider layout for Quick-Add (Buchung) modal */
.booking-modal {
    width: min(1100px, 96vw);
    max-height: 90vh;
    animation: modalSlideUp 0.25s ease-out;
}

/* Wider Members modal similar to booking */
.member-modal {
    width: min(1100px, 96vw);
    max-height: 90vh;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    margin: auto;
    animation: modalSlideUp 0.25s ease-out;
}

/* Einladung per E-Mail Modal (Members) */
.invite-modal {
    width: min(900px, 96vw);
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    margin: auto; /* sichert vertikale Zentrierung bei flex overlay */
    animation: modalSlideUp 0.25s ease-out;
}

/* Generic two-column block grid for modals */
.block-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
}

/* Two-column layout for Basis + Finanzen blocks */
.booking-modal .block-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

/* Booking modal visual refinements */
.booking-section {
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 12px;
    background: color-mix(in oklab, var(--surface) 92%, transparent);
    display: grid;
    gap: 10px;
}
.booking-section > .helper.title {
    font-weight: 600;
    opacity: .9;
    margin: 0 0 4px;
}
.booking-section--basis,
.booking-section--finances,
.booking-section--meta,
.booking-section--attachments { border-left: 4px solid var(--border); }

.booking-type-row .segment-group,
.booking-pay-row .segment-group {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}
.segment-group .seg-btn {
    padding: 6px 14px;
    border-radius: 12px;
    background: color-mix(in oklab, var(--surface) 85%, transparent);
    border: 1px solid var(--border);
    font-weight: 500;
    line-height: 1.1;
    cursor: pointer;
    transition: background .15s ease, box-shadow .15s ease, border-color .15s ease;
}
.segment-group .seg-btn.active {
    background: color-mix(in oklab, var(--accent) 20%, var(--surface));
    border-color: var(--accent);
    box-shadow: 0 0 0 1px color-mix(in oklab, var(--accent) 50%, transparent);
}
.segment-group .seg-btn[data-type="IN"],
.segment-group .seg-btn[data-type="OUT"],
.segment-group .seg-btn[data-type="TRANSFER"] { color: var(--text); }
.segment-group .seg-btn:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

.booking-meta-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}
@media (max-width: 1040px) {
    .booking-meta-grid { grid-template-columns: 1fr; }
}

@media (max-width: 1040px) {
    .booking-modal .block-grid {
        grid-template-columns: 1fr;
    }
}

/* Responsive tweaks similar to invoice modal */
@media (max-width: 1040px) {
    .booking-modal {
        width: min(96vw, 100%);
        padding: 12px;
    }
}
@media (max-width: 880px) {
    .booking-modal {
        width: min(96vw, 100%);
        padding: 12px;
    }
}

.row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

/* In the wider booking modal, allow denser grids */
.booking-modal .row {
    grid-template-columns: repeat(2, 1fr);
}
/* First finance row: select + amount + VAT tighter layout */
.booking-section--finances .row:first-of-type {
    grid-template-columns: auto 1fr auto;
    align-items: end;
}

@media (max-width: 1040px) {
    .booking-modal .row {
        grid-template-columns: 1fr 1fr; /* fall back to 2 cols on narrower screens */
    }
}
@media (max-width: 720px) {
    .booking-modal .row {
        grid-template-columns: 1fr; /* single column on small screens */
    }
}

.field {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.input,
select,
textarea {
    background: var(--surface);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 8px 10px;
    font-family: inherit;
}

/* Ensure date inputs use same UI font */
input[type="date"] {
    font-family: inherit;
}

/* Chromium: tune calendar icon for dark backgrounds */
:root[data-theme="dark"] input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(1) brightness(1.1) contrast(0.9);
}

/* Improve focus ring visibility against dark surfaces */
:root[data-theme="dark"] input[type="date"]:focus {
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 28%, transparent);
}

/* Input adornments (prefix/suffix like ‚Ç¨) */
.adorn-wrap {
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.adorn-wrap .input { width: 100%; }
/* Unified amount input sizing; euro now sits outside as separate inline element */


/* VAT input narrower */
.booking-section--finances input[type="number"][step="0.1"] { width: 110px; }

/* Remove previous transfer-specific width rule */

.adorn-suffix {
    color: var(--text-dim);
    font-weight: 600;
    padding-left: 4px;
    -webkit-user-select: none;
    user-select: none;
}

/* Hide native number input spinners for amount fields */
.amount-input::-webkit-outer-spin-button,
.amount-input::-webkit-inner-spin-button,
.input-transfer::-webkit-outer-spin-button,
.input-transfer::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
.amount-input { -moz-appearance: textfield; appearance: textfield; }
.input-transfer { -moz-appearance: textfield; appearance: textfield; }

/* Make the calendar icon visible on dark themes */
input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(0.85);
    opacity: .9;
}

.helper {
    color: var(--text-dim);
    font-size: 12px;
}

/* Visual indicator for required fields */
.required-asterisk {
    color: var(--danger);
    font-weight: 700;
    margin-left: 4px;
}

/* Chips for active filters (tags) - fully rounded */
.chip {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 6px;
    border-radius: 999px;
    background: var(--muted);
    border: 1px solid var(--border);
    font-size: 11px;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.chip:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
}

.chip .chip-x,
.chip-x {
    border: 0;
    background: transparent;
    color: var(--text-dim);
    cursor: pointer;
}

/* Budget badges - compact, with icon and hover effect */
.badge-budget {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    padding: 2px 6px;
    border-radius: 4px;
    background: var(--muted);
    border: 1px solid var(--border);
    font-size: 11px;
    font-weight: 500;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.badge-budget:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
}

.badge-budget::before {
    content: 'üí∞';
    font-size: 11px;
}

/* Earmark (Zweckbindung) badges - compact, with icon and hover effect */
.badge-earmark {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    padding: 2px 6px;
    border-radius: 4px;
    background: var(--muted);
    border: 1px solid var(--border);
    font-size: 11px;
    font-weight: 500;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.badge-earmark:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
}

.badge-earmark::before {
    content: 'üéØ';
    font-size: 11px;
}

/* Brief flash highlight for newly created/updated rows */
@keyframes rowFlash {
    0% { background-color: color-mix(in oklab, var(--accent) 45%, transparent); }
    100% { background-color: transparent; }
}

tbody tr.row-flash {
    animation: rowFlash 2.4s ease-out 1;
}

/* Toast notifications */
.toast-container {
    position: fixed;
    right: 16px;
    bottom: 16px;
    display: grid;
    gap: 8px;
    z-index: 9999;
}

.toast {
    background: color-mix(in oklab, var(--surface) 92%, transparent);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 10px 12px;
    box-shadow: var(--shadow-1);
    color: var(--text);
    min-width: 260px;
    max-width: 560px;
    display: flex;
    align-items: flex-start;
    gap: 8px;
    flex-wrap: wrap; /* allow long text and action to wrap to the next line */
}

.toast.success {
    border-left: 4px solid var(--success);
}

.toast.error {
    border-left: 4px solid var(--danger);
}

.toast .title {
    font-weight: 700;
    margin-right: 6px;
}

/* Ensure action buttons in toasts are visible when text is long */
.toast .btn {
    flex: 0 0 auto;
}

/* Activity list icon wrapper */
.activity-icon {
    display: inline-flex;
    width: 18px;
    height: 18px;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto;
}

/* Chart legends outside SVG */
.legend {
    display: inline-flex;
    align-items: center;
    gap: 12px;
    color: var(--text-dim);
    font-size: 12px;
}

.legend-item {
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.legend-swatch {
    width: 10px;
    height: 10px;
    border-radius: 2px;
    border: 1px solid var(--border);
    display: inline-block;
}

/* Inputs hover/focus for better affordance */
.input:hover,
select:hover,
textarea:hover {
    border-color: color-mix(in oklab, var(--accent) 35%, var(--border));
}

.input:focus,
select:focus,
textarea:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 25%, transparent);
}

/* Import mapping: grouped layout */
.group-grid {
    display: grid;
    /* Larger min size to avoid horizontal overlap of dropdowns */
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 12px;
}

.field-group {
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 10px;
    background: color-mix(in oklab, var(--surface) 88%, transparent);
}

.field-group>.group-title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 700;
    margin-bottom: 8px;
}

.field-group .field {
    margin-top: 8px;
}

/* Field rows in mapping: label + control with responsive wrapping */
.field-row {
    display: grid;
    grid-template-columns: 1fr minmax(140px, 1fr);
    align-items: center;
    gap: 8px;
}

.field-row>.field-label {
    min-width: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.field-row select,
.field-row .input {
    width: 100%;
    min-width: 0;
}

.fg-meta {
    border-left: 4px solid color-mix(in oklab, var(--accent) 70%, transparent);
}

.fg-amounts {
    border-left: 4px solid color-mix(in oklab, var(--success) 60%, transparent);
}

.fg-payment {
    border-left: 4px solid color-mix(in oklab, #A0D6FF 60%, transparent);
}

.fg-accounts {
    border-left: 4px solid color-mix(in oklab, #F5C451 60%, transparent);
}

.fg-defaults {
    border-left: 4px solid color-mix(in oklab, #AAB3C2 60%, transparent);
}

.muted-sep {
    height: 1px;
    background: var(--border);
    margin: 8px 0;
}

.badge-default {
    display: inline-block;
    padding: 2px 6px;
    border-radius: 999px;
    font-size: 11px;
    background: color-mix(in oklab, var(--accent) 18%, transparent);
    color: #0B0E14;
    border: 1px solid color-mix(in oklab, var(--accent) 30%, var(--border));
}

.mapping-summary {
    display: grid;
    gap: 6px;
    border: 1px dashed var(--border);
    border-radius: 10px;
    padding: 10px;
}

.mapping-summary .pair {
    display: flex;
    gap: 8px;
    justify-content: space-between;
}

.mapping-summary .k {
    color: var(--text-dim);
}

.mapping-summary .v {
    max-width: 60%;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
}

/* Inline label + control pairing to avoid line breaks between them */
.inline-field {
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

/* Floating Action Button (FAB) for + Buchung */
.fab {
    position: fixed;
    right: 50px;
    bottom: 24px;
    z-index: 3000;
    /* above cards and tables, below toasts (9999) */
    border: none;
    border-radius: 14px;
    font-weight: 800;
    padding: 14px 20px;
    font-size: 16px;
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.35);
    opacity: 0.90;
    cursor: pointer;
}

.fab-buchung {
    background: color-mix(in oklab, var(--accent) 20%, transparent);
    -webkit-backdrop-filter: blur(8px);
    backdrop-filter: blur(8px);
    color: var(--accent);
    width: 48px;
    height: 48px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.fab-buchung-icon {
    font-size: 24px;
    font-weight: 300;
    line-height: 1;
    transition: font-size 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.fab-buchung-text {
    opacity: 0;
    width: 0;
    overflow: hidden;
    white-space: nowrap;
    transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), width 0.3s cubic-bezier(0.4, 0, 0.2, 1), margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    margin-left: 0;
}

.fab-buchung:hover {
    background: color-mix(in oklab, var(--accent) 40%, transparent);
    -webkit-backdrop-filter: blur(4px);
    backdrop-filter: blur(4px);
    color: var(--accent);
    width: auto;
    padding-left: 16px;
    padding-right: 16px;
}

.fab-buchung:hover .fab-buchung-icon {
    font-size: 20px;
}

.fab-buchung:hover .fab-buchung-text {
    opacity: 1;
    width: auto;
    margin-left: 6px;
}

/* Base sizing for invoice modal fields (prevent over-stretching) */
.invoice-modal .party-input { max-width: 500px; }
.invoice-modal .amount-input { max-width: 360px; }
.invoice-modal .tags-editor .input { max-width: 680px; }
.invoice-modal { width: min(1150px, 96vw); }

/* File name truncation in invoice modal */
.invoices-file-name {
    max-width: 340px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Attachment icon in invoice table */
.invoices-attachment-icon {
    margin-left: 6px;
    opacity: 0.7;
    font-size: 14px;
}

/* Responsive tweaks for the invoice modal at minimal widths */
@media (max-width: 1040px) {
    .invoice-modal {
        width: min(96vw, 100%);
        padding: 12px;
    }
    .invoice-modal .party-input {
        max-width: 260px; /* narrower Partei at minimal app width */
    }
    .invoice-modal .amount-input {
        max-width: 220px; /* narrower Betrag at minimal app width */
    }
    .invoice-modal .tags-editor .input {
        max-width: 520px; /* cap tags row to avoid stretching */
    }
}
@media (max-width: 880px) {
    .invoice-modal {
        width: min(96vw, 100%);
        padding: 12px;
    }
    .invoice-modal .party-input {
        max-width: 320px;
    }
    .invoice-modal .amount-input {
        max-width: 260px;
    }
    .invoice-modal .tags-editor .input {
        /* tighten the inline container to avoid overflow */
        padding: 6px 8px;
    }
}

@media (max-width: 720px) {
    .invoice-modal .party-input {
        max-width: 260px;
    }
    .invoice-modal .amount-input {
        max-width: 220px;
    }
}

/* Generic Suspense fallback styling (used by root App wrapper) */
.suspense-fallback {
    min-height: 100vh;
    display: grid;
    place-items: center;
    color: var(--text-dim);
    font-family: system-ui, sans-serif;
}
.suspense-box {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}
.suspense-text {
    font-weight: 600;
}
.spinner {
    width: 28px;
    height: 28px;
    border: 3px solid var(--border);
    border-top-color: var(--accent);
    border-radius: 50%;
    animation: spin 0.9s linear infinite;
}
@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Top header organisation line */
.top-header-org {
    display: inline-flex;
    align-items: center;
    gap: 8px;
}
.top-header-org__logo {
    border-radius: 4px;
    display: block;
}
.top-header-org__text {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Organization Switcher */
.org-switcher {
    position: relative;
    display: inline-flex;
}

.org-switcher-trigger {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    border-radius: 8px;
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--text);
    font-size: 0.875rem;
    cursor: pointer;
    transition: background 0.15s, border-color 0.15s;
    max-width: 200px;
}
.org-switcher-trigger:hover {
    background: var(--muted);
    border-color: var(--text);
}
.org-switcher-trigger:disabled {
    opacity: 0.6;
    cursor: wait;
}

.org-switcher-icon {
    font-size: 1rem;
    flex-shrink: 0;
}

.org-switcher-name {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
    text-align: left;
}

.org-switcher-arrow {
    font-size: 0.65rem;
    opacity: 0.6;
    flex-shrink: 0;
}

.org-switcher-dropdown {
    position: absolute;
    top: calc(100% + 4px);
    left: 0;
    min-width: 220px;
    max-width: 300px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
    z-index: 2000;
    padding: 6px;
    animation: org-dropdown-in 0.15s ease-out;
}
@keyframes org-dropdown-in {
    from { opacity: 0; transform: translateY(-8px); }
    to { opacity: 1; transform: translateY(0); }
}

.org-switcher-header {
    padding: 6px 10px 8px;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--muted-text);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.org-switcher-item {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    padding: 8px 10px;
    border: none;
    border-radius: 6px;
    background: transparent;
    color: var(--text);
    font-size: 0.875rem;
    cursor: pointer;
    text-align: left;
    transition: background 0.1s;
}
.org-switcher-item:hover {
    background: var(--muted);
}
.org-switcher-item.active {
    background: color-mix(in oklab, var(--primary) 15%, transparent);
    cursor: default;
}
.org-switcher-item:disabled {
    cursor: default;
}

.org-item-name {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.org-item-badge {
    font-size: 0.65rem;
    padding: 2px 6px;
    border-radius: 4px;
    background: var(--primary);
    color: #fff;
    font-weight: 600;
    text-transform: uppercase;
    flex-shrink: 0;
}

.org-switcher-divider {
    height: 1px;
    background: var(--border);
    margin: 6px 4px;
}

.org-switcher-new {
    color: var(--primary);
    font-weight: 500;
}
.org-switcher-new:hover {
    background: color-mix(in oklab, var(--primary) 10%, transparent);
}

/* Window controls in titlebar */
.window-controls {
    display: inline-flex;
    gap: 4px;
    justify-self: end;
}
.window-controls__btn {
    width: 28px;
    height: 28px;
    padding: 0;
    display: grid;
    place-items: center;
    border-radius: 8px;
}

/* Electron-specific note: app-region is applied inline to avoid CSS linter false positives */

/* Sidebar navigation */
.sidebar-nav {
    display: flex;
    flex-direction: column;
    gap: 6px;
}
.nav-separator {
    height: 1px;
    background: var(--border);
    margin: 6px 0;
}
.nav-separator--lg {
    margin: 8px 0;
}
.sidebar-button__icon {
    width: 22px;
    display: inline-flex;
    justify-content: center;
}
.btn.ghost.is-active {
    background: color-mix(in oklab, var(--accent) 15%, transparent);
}
/* Icon color classes (used when navIconColorMode === 'color') */
.icon-color-Dashboard { color: #7C4DFF; }
.icon-color-Buchungen { color: #2962FF; }
.icon-color-Verbindlichkeiten { color: #00B8D4; }
.icon-color-Mitglieder { color: #26A69A; }
.icon-color-Budgets { color: #00C853; }
.icon-color-Zweckbindungen { color: #FFD600; }
.icon-color-Belege { color: #FF9100; }
.icon-color-Reports { color: #F50057; }
.icon-color-Einstellungen { color: #9C27B0; }

/* ==========================
   App layout shell helpers
   ========================== */
.app-root-grid {
    display: grid;
    grid-template-rows: 56px 1fr;
    height: 100vh;
    overflow: hidden;
}
.app-header {
    grid-area: top;
    position: sticky;
    top: 0;
    z-index: 1000;
    display: grid;
    align-items: center;
    gap: 12px;
    padding: 4px 8px;
    border-bottom: 1px solid var(--border);
    -webkit-backdrop-filter: var(--blur);
    backdrop-filter: var(--blur);
    background: color-mix(in oklab, var(--surface) 50%, transparent);
}
.app-header-top { grid-template-columns: 1fr auto 1fr 104px; }
.app-header-left { grid-template-columns: 1fr 104px; }
.no-drag { pointer-events: auto; }
.header-left-group { display: inline-flex; align-items: center; gap: 6px; }
.top-nav { display: inline-flex; align-items: center; gap: 6px; justify-self: center; }
.side-nav { display: flex; flex-direction: column; gap: 4px; padding: 4px; }
.nav-btn { width: 36px; height: 36px; padding: 0; display: grid; place-items: center; border-radius: 10px; position: relative; }
.nav-btn.active { background: color-mix(in oklab, var(--accent) 15%, transparent); }
.nav-badge { 
  position: absolute; 
  top: -4px; 
  right: -4px; 
  min-width: 18px; 
  height: 18px; 
  padding: 0 5px; 
  border-radius: 9px; 
  background: color-mix(in oklab, var(--danger) 75%, transparent); 
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  color: white; 
  font-size: 11px; 
  font-weight: 700; 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  pointer-events: none;
  border: 1px solid color-mix(in oklab, var(--danger) 40%, transparent);
}

/* When sidebar is expanded (has label), position badge inline at the end */
.side-nav-btn:has(.nav-label) .nav-badge {
  position: static;
  margin-left: auto;
  transform: none;
  border: none; /* Optional: remove border in inline mode if preferred */
}

.nav-divider { width: 1px; height: 20px; background: var(--border); align-self: center; }
.side-nav .nav-divider { width: auto; height: 1px; margin: 6px 0; }
.top-nav .divider-v { 
  display: block;
  width: 1px; 
  height: 24px; 
  margin: 0 6px; 
  background: var(--border); 
  flex-shrink: 0;
  opacity: 0.6;
}
.nav-label { font-size: 14px; }
.icon-wrapper { width: 22px; min-width: 22px; display: inline-flex; justify-content: center; align-items: center; }
.app-sidebar { grid-area: side; display: flex; flex-direction: column; padding: 8px 4px; border-right: 1px solid var(--border); overflow: visible; }
.side-nav { overflow: visible; }

/* Side nav button styles - collapsed (icon only) and expanded (with labels) */
.side-nav .nav-btn { 
  width: 100%; 
  height: auto;
  min-height: 36px;
  padding: 6px 8px;
}
.side-nav .nav-btn:not(:has(.nav-label)) { 
  justify-content: center; 
}
.side-nav .nav-btn:has(.nav-label) { 
  display: flex;
  justify-content: flex-start;
  gap: 10px;
}

/* Custom Tooltip Styles */
.has-tooltip {
  position: relative;
}

.has-tooltip::after {
  content: attr(data-tooltip);
  position: absolute;
  top: calc(100% + 6px);
  left: 50%;
  transform: translateX(-50%);
  padding: 6px 10px;
  background: var(--surface);
  color: var(--text);
  font-size: 12px;
  font-weight: 500;
  white-space: nowrap;
  border-radius: 6px;
  border: 1px solid var(--border);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.15s ease, visibility 0.15s ease;
  pointer-events: none;
  z-index: 1000;
}

.has-tooltip::before {
  content: '';
  position: absolute;
  top: calc(100% + 2px);
  left: 50%;
  transform: translateX(-50%);
  border: 4px solid transparent;
  border-bottom-color: var(--border);
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.15s ease, visibility 0.15s ease;
  pointer-events: none;
  z-index: 1001;
}

.has-tooltip:hover::after,
.has-tooltip:hover::before {
  opacity: 1;
  visibility: visible;
}

/* Tooltip right (for sidebar) */
.has-tooltip.tooltip-right::after {
  top: 50%;
  left: calc(100% + 8px);
  transform: translateY(-50%);
}

.has-tooltip.tooltip-right::before {
  top: 50%;
  left: calc(100% + 4px);
  transform: translateY(-50%);
  border: 4px solid transparent;
  border-right-color: var(--border);
  border-bottom-color: transparent;
}

.app-main { grid-area: main; padding: 16px; overflow-y: auto; }
.app-logo { border-radius: 4px; display: block; }
.toast-row { display: flex; align-items: center; gap: 12px; }
.modal-wide { width: min(96vw, 1200px); max-width: 1200px; display: grid; gap: 10px; }
.inline-helpers-row { display: flex; align-items: baseline; gap: 10px; flex-wrap: wrap; margin-top: 2px; }
.row-between { display: flex; justify-content: space-between; align-items: center; }
.min-w-140 { min-width: 140px; }
.tags-input-inline { flex: 1; min-width: 120px; border: none; outline: none; background: transparent; color: var(--text); }
.suggestions-palette { padding: 6px; margin-top: 6px; display: flex; gap: 6px; flex-wrap: wrap; }
.tags-input { display: flex; flex-wrap: wrap; gap: 6px; align-items: center; min-height: 34px; }
.col-span-2 { grid-column: 1 / span 2; }
.timeline-scroll { margin-top: 8px; overflow-x: auto; }
.desc-span { min-width: 160px; flex: 1 1 auto; }
.badge-center { display: inline-grid; place-items: center; }

/* Charts shared helpers */
.chart-card {
    padding: 12px;
    overflow: hidden;
}

.chart-head {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 6px;
}

.chart-canvas {
    position: relative;
}

.chart-loading {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
}

/* Dashboard: subtle tinted cards for clearer visual separation */
.card--accent {
    background: color-mix(in oklab, var(--accent) 10%, var(--surface));
    border-left: 4px solid var(--accent);
}
.card--success {
    background: color-mix(in oklab, var(--success) 10%, var(--surface));
    border-left: 4px solid var(--success);
}
.card--danger {
    background: color-mix(in oklab, var(--danger) 10%, var(--surface));
    border-left: 4px solid var(--danger);
}

/* Small colored swatch for legends */
.swatch-dot {
    width: 10px;
    height: 10px;
    border-radius: 3px;
    display: inline-block;
}

/* Loading spinner animation */
@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Required field asterisk marker */
.req-asterisk {
    color: var(--danger);
    font-weight: 700;
    margin-left: 4px;
    font-size: 0.9em;
    line-height: 1;
}
label .req-asterisk {
    vertical-align: middle;
}

/* ============================================================================
   Utility Classes - H√§ufig verwendete Layout-Patterns
   ============================================================================ */

/* Flex Utilities */
.flex { display: flex; }
.inline-flex { display: inline-flex; }
.flex-col { display: flex; flex-direction: column; }
.flex-wrap { flex-wrap: wrap; }
.items-center { align-items: center; }
.items-start { align-items: flex-start; }
.items-end { align-items: flex-end; }
.items-baseline { align-items: baseline; }
.justify-start { justify-content: flex-start; }
.justify-end { justify-content: flex-end; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.flex-1 { flex: 1; }
.flex-auto { flex: 1 1 auto; }

/* Gap Utilities */
.gap-4 { gap: 4px; }
.gap-6 { gap: 6px; }
.gap-8 { gap: 8px; }
.gap-10 { gap: 10px; }
.gap-12 { gap: 12px; }
.gap-16 { gap: 16px; }

/* Grid Utilities */
.grid { display: grid; }
.inline-grid { display: inline-grid; }
.place-items-center { place-items: center; }
.place-content-center { place-content: center; }

/* Common Layout Patterns */
.icon-btn {
    width: 28px;
    height: 28px;
    padding: 0;
    display: grid;
    place-items: center;
    border-radius: 8px;
}

.icon-btn-sm {
    width: 24px;
    height: 24px;
    padding: 0;
    display: inline-grid;
    place-items: center;
    border-radius: 6px;
}

.icon-btn-md {
    width: 32px;
    height: 32px;
    padding: 0;
    display: grid;
    place-items: center;
}

.icon-btn-lg {
    width: 36px;
    height: 36px;
    padding: 0;
    display: grid;
    place-items: center;
    border-radius: 10px;
}

/* Dividers */
.divider-h {
    height: 1px;
    background: var(--border);
    margin: 6px 0;
}

.divider-v {
    display: inline-block;
    width: 1px;
    height: 24px;
    background: var(--border);
    margin: 0 8px;
}

/* Icon/Text Centering */
.icon-wrapper {
    width: 22px;
    display: inline-flex;
    justify-content: center;
}

/* Text Utilities */
.text-ellipsis {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.text-nowrap { white-space: nowrap; }
.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }

/* Spacing Utilities */
.m-0 { margin: 0; }
.mt-2 { margin-top: 2px; }
.mt-4 { margin-top: 4px; }
.mt-6 { margin-top: 6px; }
.mt-8 { margin-top: 8px; }
.mt-12 { margin-top: 12px; }
.mb-6 { margin-bottom: 6px; }
.mb-8 { margin-bottom: 8px; }
.ml-6 { margin-left: 6px; }
.ml-auto { margin-left: auto; }

.p-8 { padding: 8px; }
.p-10 { padding: 10px; }
.p-12 { padding: 12px; }

/* Overflow Utilities */
.overflow-auto { overflow: auto; }
.overflow-x-auto { overflow-x: auto; }
.overflow-y-auto { overflow-y: auto; }

/* Common Width/Height */
.w-full { width: 100%; }
.h-full { height: 100%; }

/* Opacity */
.opacity-60 { opacity: 0.6; }
.opacity-85 { opacity: 0.85; }

/* Font Weight */
.font-semibold { font-weight: 600; }
.font-medium { font-weight: 500; }

/* Cursor */
.cursor-pointer { cursor: pointer; }
.cursor-not-allowed { cursor: not-allowed; }

/* Word Break */
.word-break-all { word-break: break-all; }
.user-select-all { -webkit-user-select: all; user-select: all; }

/* ========================================
   BindingModal - Specific CSS Classes
   ======================================== */

/* Field with full width span across two columns */
.field-full-width {
    grid-column: 1 / span 2;
}

/* Color picker container */
.color-picker-container {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

/* Color swatch button */
.color-swatch-btn {
    padding: 0;
    width: 28px;
    height: 28px;
    border-radius: 6px;
    background: var(--swatch-color);
    color: var(--swatch-text, #fff);
}

.color-swatch-selected {
    border: 2px solid var(--text);
}

.color-swatch-unselected {
    border: 2px solid transparent;
}

/* Custom color button */
.custom-color-btn {
    height: 28px;
}

/* TagsEditor */
.tags-editor-input { display:flex; flex-wrap:wrap; gap:6px; align-items:center; min-height:34px; }
.tags-editor-text-input { flex:1; min-width:120px; border:none; outline:none; background:transparent; color:var(--text); }
.tags-suggestions { padding:6px; margin-top:6px; display:flex; gap:6px; flex-wrap:wrap; }
.tag-suggestion-btn { position:relative; }
.tag-suggestion-btn.tag-has-color { background: var(--tag-bg); color: var(--tag-fg); }

/* Modal footer actions */
.modal-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 8px;
    margin-top: 12px;
}

.modal-actions {
    display: flex;
    gap: 8px;
}

.modal-delete-btn {
    margin-right: 16px;
}

/* Delete confirmation modal */
.delete-modal {
    max-width: 520px;
    display: grid;
    gap: 12px;
}

.delete-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.delete-modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: 8px;
}

/* Color picker modal */
.color-picker-modal {
    max-width: 420px;
    display: grid;
    gap: 12px;
}

.color-picker-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.color-input-native {
    width: 60px;
    height: 36px;
    padding: 0;
    border: 1px solid var(--border);
    border-radius: 6px;
    background: transparent;
}

.color-preview-card {
    padding: 8px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.color-preview-swatch {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    border: 1px solid var(--border);
}

.contrast-sample {
    padding: 2px 6px;
    border-radius: 6px;
}

.error-text {
    color: var(--danger);
}

/* ========================================
   BudgetModal - Specific CSS Classes
   ======================================== */

/* Date range container spanning 2 columns */
.date-range-container {
    grid-column: 1 / span 2;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
}

/* Input with error state */
.input-error {
    border-color: var(--danger);
}

/* Additional BudgetModal refinements */
.budget-enforce-range-label { display:flex; align-items:center; gap:8px; cursor:pointer; }
.budget-enforce-range-checkbox { cursor:pointer; }
.budget-actions-row { display:flex; gap:8px; }

/* ========================================
   Report Charts - Common CSS Classes
   ======================================== */

/* Chart card wrapper */
.report-chart-card {
    margin-top: 12px;
    padding: 12px;
}

    /* Chart card with overflow hidden */
    .chart-card-overflow {
        padding: 12px;
        overflow: hidden;
    }

    /* Helper with top margin */
    .helper-mt-6 {
        margin-top: 6px;
    }

        /* ========================================
           Dashboard - Common CSS Classes
           ======================================== */

        /* Dashboard main card */
        .dashboard-card {
            padding: 12px;
            display: grid;
            gap: 12px;
        }

        /* Dashboard header flex */
        .dashboard-header {
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            gap: 8px;
        }

        /* Dashboard title */
        .dashboard-title {
            font-size: 18px;
            font-weight: 600;
        }

        /* Quote section */
        .dashboard-quote {
            text-align: right;
            max-width: 520px;
        }

        .dashboard-quote-text {
            font-style: italic;
        }

        /* Auto-fit grid for cards */
        .dashboard-grid-auto {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
        }

        /* Period selector row */
        .dashboard-period-row {
            grid-column: 1 / -1;
            display: flex;
            justify-content: flex-end;
            gap: 8px;
            align-items: center;
        }

        /* Button with active state */
        .btn-period-active {
            background: color-mix(in oklab, var(--accent) 20%, transparent);
            color: var(--accent);
            font-weight: 600;
        }

        /* Summary card with padding */
        .summary-card {
            padding: 12px;
        }

        /* Summary value - bold */
        .summary-value {
            font-weight: 600;
        }

        /* Summary value with dynamic color */
        .summary-value-overflow {
            font-weight: 600;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* Invoice card with warning color */
        .invoice-card-warning {
            padding: 10px;
            min-width: 0;
        }

        .invoice-card-danger {
            padding: 10px;
            border-left: 4px solid var(--danger);
            min-width: 0;
        }

        /* Invoice list container */
        .invoice-list-container {
            margin-top: 6px;
            max-height: 180px;
            overflow-y: auto;
            display: grid;
            gap: 4px;
        }

        /* Invoice item row */
        .invoice-item-row {
            cursor: pointer;
            display: grid;
            grid-template-columns: 120px 1fr auto;
            align-items: center;
            padding: 4px 8px;
            border: 1px solid var(--border);
            border-radius: 8px;
        }

            /* Text utilities */
            .text-right-bold {
                text-align: right;
                font-weight: 600;
            }

        /* ============================================
           QuickAddModal Utility Classes
           ============================================ */
        
        /* Modal header with close button */
        .modal-header-flex {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .modal-header-flex h2 {
            margin: 0;
        }

        /* Summary card padding */
        .summary-card {
            padding: 10px;
            margin-bottom: 8px;
        }

        .summary-text-bold {
            font-weight: 600;
        }

        /* Block grid spacing */
        .block-grid-mb {
            margin-bottom: 8px;
        }

        /* Card padding for form blocks */
        .form-card {
            padding: 12px;
        }

        /* Helper text spacing */
        .helper-mb {
            margin-bottom: 6px;
        }

        /* Flex row with gap 8 */
        .flex-gap-8 {
            display: flex;
            gap: 8px;
        }

        /* Full width field */
        .field-full-width {
            grid-column: 1 / -1;
        }

        /* Flex 1 for growing elements */
        .flex-1 {
            flex: 1;
        }

        /* Button active state for type/payment method toggles */
        .btn-toggle-active {
            /* Stronger highlight background for active toggle buttons */
            background: linear-gradient(180deg, color-mix(in oklab, var(--accent) 78%, var(--surface)), color-mix(in oklab, var(--accent) 58%, var(--surface)));
            color: #fff; /* ensure selected state text is clearly visible (e.g., Zahlweg) */
            box-shadow: 0 0 0 1px color-mix(in oklab, var(--accent) 65%, transparent) inset, 0 1px 2px rgba(0,0,0,.35);
        }

        .btn-type-in {
                    color: var(--success);
        }

        .btn-type-out {
                    color: var(--danger);
        }

        /* Semantic active states for type buttons (IN/OUT) */
        .btn-type-in.btn-toggle-active {
            background: linear-gradient(180deg, color-mix(in oklab, var(--success) 80%, var(--surface)), color-mix(in oklab, var(--success) 60%, var(--surface)));
            color: #fff;
            box-shadow: 0 0 0 1px color-mix(in oklab, var(--success) 65%, transparent) inset, 0 1px 2px rgba(0,0,0,.35);
        }
        .btn-type-out.btn-toggle-active {
            background: linear-gradient(180deg, color-mix(in oklab, var(--danger) 80%, var(--surface)), color-mix(in oklab, var(--danger) 60%, var(--surface)));
            color: #fff;
            box-shadow: 0 0 0 1px color-mix(in oklab, var(--danger) 65%, transparent) inset, 0 1px 2px rgba(0,0,0,.35);
        }

                /* Group container for adjacent toggle buttons (Art / Zahlweg) */
                .btn-group {
                    display: inline-flex;
                    gap: 6px; /* visual breathing room so buttons don't touch */
                }

                /* Slight scale/brightness feedback */
                .btn-group .btn:active {
                    transform: scale(.97);
                }

                /* Hover affordance for inactive toggle buttons */
                .btn-group .btn:not(.btn-toggle-active):hover {
                    background: color-mix(in oklab, var(--accent) 18%, transparent);
                }

        /* File list styles */
        .file-list {
            margin: 8px 0 0;
            padding-left: 18px;
        }

        .file-list-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .file-name {
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* Attachment card */
        .attachment-card {
            padding: 12px;
        }

        /* Attachment header */
        .attachment-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
        }

        .attachment-title {
            display: flex;
            align-items: baseline;
            gap: 8px;
        }

        /* Modal footer actions */
        .modal-footer-actions {
            display: flex;
            justify-content: space-between;
            gap: 8px;
            margin-top: 12px;
            align-items: center;
        }

            .text-overflow-ellipsis {
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
            }

        /* Overflow container */
        .overflow-container-mt {
            margin-top: 10px;
            overflow: hidden;
        }

        /* Grid with wider items */
        .dashboard-grid-wide {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 8px;
            overflow: hidden;
        }

    /* Chart header with title and legend */
.report-chart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Chart container with relative positioning for tooltip */
.chart-container-relative {
    position: relative;
}

/* Chart tooltip */
.chart-tooltip {
    position: absolute;
    top: 6px;
    left: 12px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 6px 8px;
    pointer-events: none;
    box-shadow: var(--shadow-1);
    font-size: 12px;
    z-index: 10;
}

.chart-tooltip-header {
    font-weight: 600;
    margin-bottom: 4px;
}

.chart-tooltip-row {
    display: flex;
    justify-content: space-between;
    gap: 12px;
}

/* Legend swatches - specific colors */
.legend-swatch-in {
    background: #2e7d32;
}

.legend-swatch-out {
    background: #c62828;
}

/* Donut chart specific */
.donut-chart-wrapper {
    display: flex;
    gap: 16px;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    position: relative;
}

.legend-container {
    display: flex;
    gap: 8px;
    align-items: center;
}

/* Chart header with baseline alignment */
.chart-header-baseline {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
}

/* Chart overflow container */
.chart-overflow-container {
    position: relative;
    overflow: hidden;
}

/* SVG chart max width */
.chart-svg-responsive {
    max-width: 100%;
    height: auto;
}

/* Loading overlay */
.chart-loading-overlay {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
}

/* Tooltip with dynamic positioning (left %) */
.chart-tooltip-dynamic {
    position: absolute;
    top: 8px;
    transform: translateX(-50%);
    background: var(--surface);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 6px 8px;
    pointer-events: none;
    box-shadow: var(--shadow-1);
    font-size: 12px;
}

        /* ============================================
           InvoicesView Utility Classes
           ============================================ */
        
        /* Main container */
        .invoices-container {
            padding: 12px;
            display: grid;
            gap: 12px;
        }

        /* Header row */
        .invoices-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .invoices-header h1 {
            margin: 0;
        }

        /* Filter toolbar */
        .invoices-filters {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
        }

        .invoices-search {
            width: 280px;
        }

        .filter-divider {
            width: 12px;
        }

        /* Clear filters button */
        .btn-clear-filters {
            background: var(--accent);
            color: #000;
        }

        /* Summary bar */
        .invoices-summary {
            margin-bottom: 6px;
        }

        .summary-remaining {
            margin-left: 8px;
            color: var(--text-dim);
        }

        /* Pagination */
        .invoices-pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            gap: 8px;
            flex-wrap: wrap;
        }

        .pagination-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Payment modal */
        .payment-modal-grid {
            display: grid;
            gap: 10px;
            max-width: 420px;
        }

        /* Invoice form */
        .invoice-form-grid {
            display: grid;
            gap: 12px;
        }

        .invoice-form-card {
            padding: 12px;
            display: grid;
            gap: 10px;
        }

        /* Amount input large */
        .amount-input-large {
            font-size: 24px;
            padding-top: 10px;
            padding-bottom: 10px;
        }

        /* Payment method buttons */
        .payment-method-row {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .payment-method-field {
            min-width: 160px;
        }

        .payment-method-buttons {
            display: flex;
            gap: 6px;
        }

        .payment-btn {
            width: 56px;
            justify-content: center;
        }

        .payment-btn-wide {
            width: 80px;
            justify-content: center;
        }

        /* Type buttons */
        .type-buttons-field {
            min-width: 180px;
        }

        .type-buttons {
            display: flex;
            gap: 6px;
        }

        .type-btn {
            width: 80px;
            justify-content: center;
        }

        /* Toggle active states for invoice form */
        .btn-payment-none-active {
            background: color-mix(in oklab, var(--accent) 15%, transparent);
        }

        .btn-payment-active {
            background: color-mix(in oklab, var(--accent) 25%, transparent);
        }

        .btn-type-in-active {
            background: color-mix(in oklab, var(--success) 25%, transparent);
        }

        .btn-type-out-active {
            background: color-mix(in oklab, var(--danger) 25%, transparent);
        }

/* ========== Members View ========== */
.members-header {
    padding: 12px;
}

.members-header-top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    flex-wrap: wrap;
}

.members-header-left {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
}

.members-header-right {
    display: flex;
    gap: 8px;
    align-items: center;
}

.members-title {
    margin: 0;
}

.members-search {
    width: 300px;
}

.members-board-card {
    margin-top: 8px;
}

.members-board-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 8px 0 8px;
}

.members-board-title {
    margin: 0;
}

.members-board-table {
    margin-top: 4px;
    width: 100%;
}

.members-table {
    margin-top: 8px;
    width: 100%;
}

.members-sort-header {
    cursor: pointer;
}

.members-nowrap {
    white-space: nowrap;
}

.members-badge-role {
    background: var(--role-color);
    color: #fff;
}

/* ========================================
   Background Images
   ======================================== */

/* Base styles for background images */
html[data-background-image]:not([data-background-image="none"])::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 0;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    opacity: 0.25;
    pointer-events: none;
}

/* Ensure main content is above background */
html[data-background-image]:not([data-background-image="none"]) body {
    position: relative;
    z-index: 1;
}

html[data-background-image="cherry-blossom"]::before {
    background-image: url('./assets/a_close_up_of_a_tree_branch_with_pink_flowers.jpg');
}

html[data-background-image="foggy-forest"]::before {
    background-image: url('./assets/a_foggy_forest_with_trees.png');
}

html[data-background-image="mountain-snow"]::before {
    background-image: url('./assets/a_mountain_range_with_snow_on_top.jpg');
}

/* ========================================
   Glassmorphism Modals
   ======================================== */

/* When glass modals are enabled, make modal backgrounds translucent with blur */
html[data-glass-modals="true"] .modal-content,
html[data-glass-modals="true"] .card {
    background: color-mix(in oklab, var(--surface) 75%, transparent) !important;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
}

html[data-glass-modals="true"] .settings-content {
    background: color-mix(in oklab, var(--surface) 70%, transparent) !important;
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
}

/* Slightly more translucent for nested cards in glass mode */
html[data-glass-modals="true"] .settings-pane-card {
    background: color-mix(in oklab, var(--surface) 60%, transparent) !important;
}

/* ========================================
   Info Icon Button
   ======================================== */

.btn-info-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 2px solid var(--accent);
    background: color-mix(in oklab, var(--accent) 15%, transparent);
    color: var(--accent);
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-info-icon:hover {
    background: color-mix(in oklab, var(--accent) 30%, transparent);
    transform: scale(1.05);
}

.btn-info-icon:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

.btn-info-icon[aria-expanded="true"] {
    background: var(--accent);
    color: var(--bg);
}

/* ========================================
   Flyout Popover
   ======================================== */

.flyout-popover {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
    padding: 16px 20px;
    animation: flyout-in 0.15s ease-out;
}

@keyframes flyout-in {
    from {
        opacity: 0;
        transform: translateY(-8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.flyout-arrow {
    position: absolute;
    top: -6px;
    right: 16px;
    width: 12px;
    height: 12px;
    background: var(--surface);
    border-left: 1px solid var(--border);
    border-top: 1px solid var(--border);
    transform: rotate(45deg);
}

.flyout-title {
    margin: 0 0 12px 0;
    font-size: 15px;
    font-weight: 600;
    color: var(--text);
}

.flyout-text {
    margin: 0 0 10px 0;
    font-size: 13px;
    line-height: 1.5;
    color: var(--text);
}

.flyout-text code {
    background: color-mix(in oklab, var(--accent) 15%, transparent);
    color: var(--accent);
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 12px;
}

.flyout-link {
    color: var(--accent);
    text-decoration: none;
    font-weight: 500;
}

.flyout-link:hover {
    text-decoration: underline;
}

/* Glass mode enhancement for flyout */
html[data-glass-modals="true"] .flyout-popover {
    background: color-mix(in oklab, var(--surface) 80%, transparent);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
}

html[data-glass-modals="true"] .flyout-arrow {
    background: color-mix(in oklab, var(--surface) 80%, transparent);
}

/* ========================================
   Setup Wizard - Modern Appearance Step
   ======================================== */

.setup-appearance-card {
    padding: 16px;
    display: grid;
    gap: 20px;
}

.setup-toggle-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 16px;
}

.setup-field {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.setup-field > label {
    font-size: 13px;
    font-weight: 600;
    color: var(--text);
}

.setup-section {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.setup-section > label {
    font-size: 13px;
    font-weight: 600;
    color: var(--text);
}

.setup-preview-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

/* Toggle Button Group */
.toggle-button-group {
    display: flex;
    border-radius: var(--radius);
    overflow: hidden;
    border: 1px solid var(--border);
}

.toggle-button {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 8px 12px;
    background: transparent;
    border: none;
    color: var(--muted);
    cursor: pointer;
    font-size: 13px;
    transition: all 0.15s ease;
}

.toggle-button:not(:last-child) {
    border-right: 1px solid var(--border);
}

.toggle-button:hover {
    background: color-mix(in oklab, var(--accent) 10%, transparent);
    color: var(--text);
}

.toggle-button.active {
    background: var(--accent);
    color: var(--bg);
    font-weight: 500;
}

.toggle-icon {
    font-size: 14px;
}

/* Theme Picker */
.theme-picker {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.theme-chip {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 14px;
    background: color-mix(in oklab, var(--surface) 50%, transparent);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    cursor: pointer;
    font-size: 13px;
    color: var(--text);
    transition: all 0.15s ease;
}

.theme-chip:hover {
    border-color: var(--accent);
    background: color-mix(in oklab, var(--accent) 10%, transparent);
}

.theme-chip.active {
    border-color: var(--accent);
    background: color-mix(in oklab, var(--accent) 20%, transparent);
    box-shadow: 0 0 0 2px color-mix(in oklab, var(--accent) 30%, transparent);
}

.theme-swatch {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 1px solid var(--border);
}

.theme-swatch[data-theme="default"] { background: linear-gradient(135deg, #7C4DFF 50%, #00BCD4 50%); }
.theme-swatch[data-theme="fiery-ocean"] { background: linear-gradient(135deg, #FF5722 50%, #2196F3 50%); }
.theme-swatch[data-theme="peachy-delight"] { background: linear-gradient(135deg, #FF8A65 50%, #FFCCBC 50%); }
.theme-swatch[data-theme="pastel-dreamland"] { background: linear-gradient(135deg, #CE93D8 50%, #90CAF9 50%); }
.theme-swatch[data-theme="ocean-breeze"] { background: linear-gradient(135deg, #26A69A 50%, #4DD0E1 50%); }
.theme-swatch[data-theme="earthy-tones"] { background: linear-gradient(135deg, #8D6E63 50%, #A5D6A7 50%); }
.theme-swatch[data-theme="monochrome-harmony"] { background: linear-gradient(135deg, #78909C 50%, #CFD8DC 50%); }
.theme-swatch[data-theme="vintage-charm"] { background: linear-gradient(135deg, #8E7CC3 50%, #F9CB9C 50%); }
.theme-swatch[data-theme="soft-blush"] { background: linear-gradient(135deg, #F48FB1 50%, #FCE4EC 50%); }
.theme-swatch[data-theme="professional-light"] { background: linear-gradient(135deg, #5C6BC0 50%, #E8EAF6 50%); }

/* Background Image Picker */
.background-picker {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.background-chip {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    padding: 8px;
    background: color-mix(in oklab, var(--surface) 50%, transparent);
    border: 2px solid var(--border);
    border-radius: var(--radius);
    cursor: pointer;
    font-size: 12px;
    color: var(--text);
    transition: all 0.15s ease;
    min-width: 90px;
}

.background-chip:hover {
    border-color: var(--accent);
}

.background-chip.active {
    border-color: var(--accent);
    background: color-mix(in oklab, var(--accent) 15%, transparent);
}

.background-preview {
    width: 70px;
    height: 45px;
    border-radius: 4px;
    background-size: cover;
    background-position: center;
    border: 1px solid var(--border);
}

.background-preview.bg-none {
    background: var(--surface);
    display: flex;
    align-items: center;
    justify-content: center;
}

.background-preview.bg-none::after {
    content: '‚Äî';
    color: var(--muted);
}

.background-preview.bg-cherry-blossom {
    background-image: url('./assets/a_close_up_of_a_tree_branch_with_pink_flowers.jpg');
}

.background-preview.bg-foggy-forest {
    background-image: url('./assets/a_foggy_forest_with_trees.png');
}

.background-preview.bg-mountain-snow {
    background-image: url('./assets/a_mountain_range_with_snow_on_top.jpg');
}