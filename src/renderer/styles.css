:root {
    --radius: 12px;
}

/* Settings layout */
.settings-container { padding: 20px; }
.settings-content { 
    overflow-y: auto;
}

/* Settings: Cards and previews */
.settings-card { border: 1px solid var(--panel-border, color-mix(in oklab, var(--text)/10%, transparent)); border-radius: 10px; background: var(--surface); box-shadow: 0 1px 0 color-mix(in oklab, var(--text)/7%, transparent) inset; }
.settings-title { display: flex; align-items: center; gap: 8px; font-size: 14px; margin-bottom: 2px; }
.settings-sub { color: color-mix(in oklab, var(--text)/68%, transparent); font-size: 12px; margin-bottom: 10px; }
.muted-sep { height: 1px; background: color-mix(in oklab, var(--text)/10%, transparent); margin: 12px 0; }

/* Tiny table preview */
/* Inline label + control */
.label-row { display: flex; align-items: center; justify-content: flex-start; gap: 8px; }

/* Accent Toggle (checkbox[role=switch]) - robust rendering */
input[type="checkbox"].toggle {
    -webkit-appearance: none !important;
    appearance: none !important;
    position: relative;
    display: inline-block !important;
    vertical-align: middle;
    width: 44px !important;
    height: 24px !important;
    min-width: 44px;
    min-height: 24px;
    border-radius: 999px !important;
    /* Use accent tint even in OFF state for visibility */
    background: linear-gradient(180deg, color-mix(in oklab, var(--accent) 30%, var(--surface)), color-mix(in oklab, var(--accent) 22%, var(--surface))) !important;
    border: 1px solid color-mix(in oklab, var(--accent) 55%, var(--surface)) !important;
    box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--bg)/50%, transparent) !important;
    background-clip: padding-box;
    cursor: pointer !important;
    transition: background .15s ease, border-color .15s ease;
    flex-shrink: 0;
    padding: 0 !important;
    margin: 0;
}
/* Hover/active affordances */
input[type="checkbox"].toggle:hover { border-color: var(--accent) !important; }
input[type="checkbox"].toggle:active::after { transform: translateX(0) scale(0.96); }
input[type="checkbox"].toggle::after {
    content: "";
    position: absolute;
    top: 2px;
    left: 2px;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, color-mix(in oklab, #ffffff 88%, var(--bg) 5%), color-mix(in oklab, #f6f8fb 82%, var(--bg) 8%));
    box-shadow: 0 1px 2px rgba(0,0,0,.35);
    transition: transform .15s ease;
}
input[type="checkbox"].toggle:checked {
    background: linear-gradient(180deg, color-mix(in oklab, var(--accent) 92%, var(--surface)), color-mix(in oklab, var(--accent) 80%, var(--surface))) !important;
    border-color: var(--accent) !important;
}
input[type="checkbox"].toggle:checked::after { transform: translateX(20px); }
input[type="checkbox"].toggle:focus-visible {
    outline: none !important;
    box-shadow: 0 0 0 2px color-mix(in oklab, var(--accent)/60%, transparent) !important;
}
input[type="checkbox"].toggle:disabled { opacity: .6; cursor: not-allowed !important; }

/* Theme swatches */
.swatches { display: inline-flex; gap: 6px; margin-top: 6px; }
.swatch { width: 18px; height: 12px; border-radius: 3px; border: 1px solid color-mix(in oklab, var(--text)/15%, transparent); box-shadow: 0 1px 0 color-mix(in oklab, var(--text)/10%, transparent) inset; }

:root[data-theme="dark"] {
    --bg: #0F1115;
    --surface: #151821;
    --muted: #1C2028;
    --border: #2B3240;
    --text: #E7EAF0;
    --text-dim: #AAB3C2;
    --accent: #6AA6FF;
    --accent-hover: #8BB9FF;
    --success: #4CC38A;
    --warning: #F5C451;
    --danger: #F06A6A;
    /* Ensure native form controls (date picker, selects, scrollbars) use dark palette */
    color-scheme: dark;
    /* Badge and semantic intensities */
    --badge-text: #E7EAF0;
    --badge-in: #4CC38A;
    --badge-out: #F06A6A;
    --success-strong: #2e7d32;
    --danger-strong: #c62828;
    --transfer-strong: #b8860b;
    /* Domain-specific swatches */
    --sphere-ideell: #6AA6FF;
    --sphere-zweck: #F5C451;
    --sphere-vermoegen: #AAB3C2;
    --sphere-wgb: #8BB9FF;
    --pm-bar: #A2E5A0;
    --pm-bank: #A0D6FF;
    --shadow-1: 0 4px 16px rgba(0, 0, 0, 0.25);
    --blur: saturate(180%) blur(10px);
    /* Tables */
    --table-row-alt: color-mix(in oklab, var(--muted) 35%, transparent);
    --table-row-sep: color-mix(in oklab, var(--border) 120%, transparent);
}

:root[data-theme="light"] {
    --bg: #F6F7F9;
    --surface: #FFFFFF;
    --muted: #EEF1F4;
    --border: #DDE2EA;
    --text: #1B2430;
    --text-dim: #5D697A;
    --accent: #6AA6FF;
    --accent-hover: #8BB9FF;
    --success: #4CC38A;
    --warning: #F5C451;
    --danger: #F06A6A;
    color-scheme: light;
    /* Badge and semantic intensities */
    --badge-text: #0B0E14;
    --badge-in: #4CC38A;
    --badge-out: #F06A6A;
    --success-strong: #2e7d32;
    --danger-strong: #c62828;
    --transfer-strong: #b8860b;
    /* Domain-specific swatches */
    --sphere-ideell: #6AA6FF;
    --sphere-zweck: #F5C451;
    --sphere-vermoegen: #AAB3C2;
    --sphere-wgb: #8BB9FF;
    --pm-bar: #A2E5A0;
    --pm-bank: #A0D6FF;
    --shadow-1: 0 4px 16px rgba(0, 0, 0, 0.15);
    --blur: saturate(180%) blur(10px);
    /* Tables */
    --table-row-alt: color-mix(in oklab, var(--muted) 40%, transparent);
    --table-row-sep: color-mix(in oklab, var(--border) 130%, transparent);
}

/* Color theme palettes (override accent colors). Applied via data-color-theme on <html>. */
:root[data-color-theme="default"] {
    --accent: #6AA6FF;
    --accent-hover: #8BB9FF;
}

/* Fiery Ocean */
:root[data-color-theme="fiery-ocean"] {
    /* Palette: barn red, fire brick, papaya whip, prussian blue, air superiority blue */
    --bg: #0e0f14; /* deepened backdrop */
    --surface: #141720;
    --muted: #1c2030;
    --border: #2a3142;
    --text: #EAEAF0;
    --text-dim: #A9B0BF;
    --accent: #669BBC; /* air-superiority-blue */
    --accent-hover: #8DB2CA;
    --success: #4CC38A;
    --warning: #F5C451;
    --danger: #C1121F; /* fire brick */
    --badge-in: #4CC38A;
    --badge-out: #C1121F;
    --sphere-ideell: #669BBC;
    --sphere-zweck: #F5C451;
    --sphere-vermoegen: #AAB3C2;
    --sphere-wgb: #003049; /* prussian blue */
    --pm-bar: #A2E5A0;
    --pm-bank: #669BBC;
}

/* Peachy Delight */
:root[data-color-theme="peachy-delight"] {
    --bg: #18191C;
    --surface: #1F2126;
    --muted: #262933;
    --border: #343A46;
    --text: #F2EEF1;
    --text-dim: #C9C1C6;
    --accent: #F4ACB7; /* cherry-blossom-pink */
    --accent-hover: #FFE5D9; /* champagne-pink */
    --success: #79c59a;
    --warning: #f1c27b;
    --danger: #9D8189; /* mountbatten-pink for harmony */
    --badge-in: #79c59a;
    --badge-out: #9D8189;
    --sphere-ideell: #F4ACB7;
    --sphere-zweck: #FFE5D9;
    --sphere-vermoegen: #C9C1C6;
    --sphere-wgb: #9D8189;
    --pm-bar: #bfe6c6;
    --pm-bank: #ffd3df;
}

/* Pastel Dreamland Adventure */
:root[data-color-theme="pastel-dreamland"] {
    --bg: #0E1116;
    --surface: #151922;
    --muted: #1B2030;
    --border: #2A3142;
    --text: #E8ECF2;
    --text-dim: #B6C0CF;
    --accent: #A2D2FF; /* light-sky-blue */
    --accent-hover: #BDE0FE; /* uranian-blue */
    --success: #6fd3a3;
    --warning: #f0cd7b;
    --danger: #ffafcc; /* carnation pink */
    --badge-in: #6fd3a3;
    --badge-out: #ffafcc;
    --sphere-ideell: #cdb4db; /* thistle */
    --sphere-zweck: #ffc8dd; /* fairy tale */
    --sphere-vermoegen: #bde0fe; /* uranian */
    --sphere-wgb: #a2d2ff; /* light sky blue */
    --pm-bar: #b9f3d2;
    --pm-bank: #c5e3ff;
}

/* Ocean Breeze */
:root[data-color-theme="ocean-breeze"] {
    --bg: #090B16;
    --surface: #0E1120;
    --muted: #131833;
    --border: #1C2445;
    --text: #E6F2FF;
    --text-dim: #B6D0EA;
    --accent: #00B4D8; /* pacific-cyan */
    --accent-hover: #90E0EF; /* non-photo-blue */
    --success: #55d1a0;
    --warning: #e9c15f;
    --danger: #FF6B6B;
    --badge-in: #55d1a0;
    --badge-out: #FF6B6B;
    --sphere-ideell: #0077B6; /* honolulu-blue */
    --sphere-zweck: #00B4D8; /* pacific-cyan */
    --sphere-vermoegen: #90E0EF; /* non-photo-blue */
    --sphere-wgb: #CAF0F8; /* light-cyan */
    --pm-bar: #90E0EF;
    --pm-bank: #00B4D8;
}

/* Earthy Tones */
:root[data-color-theme="earthy-tones"] {
    /* Palette inspiration: cherry-blossom-pink, champagne-pink, timberwolf, ash-gray, outer-space */
    --bg: #0F1211; /* deep charcoal with a hint of green */
    --surface: #151A18;
    --muted: #1C2421;
    --border: #2B3531;
    --text: #EDEAE5; /* warm off-white */
    --text-dim: #CFCBC3; /* muted timberwolf */
    --accent: #EDAFB8; /* cherry-blossom-pink */
    --accent-hover: #F7E1D7; /* champagne-pink */
    --success: #7FB685; /* sage */
    --warning: #D2B48C; /* tan */
    --danger: #B56576; /* muted rose */
    --badge-in: #7FB685;
    --badge-out: #B56576;
    --sphere-ideell: #EDAFB8; /* accent */
    --sphere-zweck: #D2B48C; /* tan */
    --sphere-vermoegen: #DEDBD2; /* timberwolf */
    --sphere-wgb: #4A5759; /* outer-space */
    --pm-bar: #B0C4B1; /* ash-gray */
    --pm-bank: #EDAFB8; /* accent */
}

/* Monochrome Harmony */
:root[data-color-theme="monochrome-harmony"] {
    /* Provided palette:
       --platinum: #cfdbd5ff;
    --alabaster: #e8eddfff;
    --saffron: #f5cb5cff;
    --eerie-black: #242423ff;
    --jet: #333533ff; */
    --bg: #242423;         /* eerie black */
    --surface: #333533;    /* jet */
    --muted: #2B2D2B;      /* slightly darker blend for controls */
    --border: #3E423E;     /* subtle edge */
    --text: #E8EDDF;       /* alabaster */
    --text-dim: #CFDBD5;   /* platinum */
    --accent: #F5CB5C;     /* saffron */
    --accent-hover: #ffd987; /* lighter saffron */
    --success: #8BC34A;    /* harmonious green accent */
    --warning: #F5CB5C;    /* saffron */
    --danger: #E57373;     /* soft red */
    --badge-in: #8BC34A;
    --badge-out: #E57373;
    --sphere-ideell: #F5CB5C; /* accent */
    --sphere-zweck: #CFDBD5;  /* platinum */
    --sphere-vermoegen: #E8EDDF; /* alabaster */
    --sphere-wgb: #333533;  /* jet */
    --pm-bar: #CFDBD5;      /* soft neutral */
    --pm-bank: #F5CB5C;     /* accent */
}

/* Vintage Charm */
:root[data-color-theme="vintage-charm"] {
    /* Provided palette:
       --rich-black: #04151f;
       --dark-slate-gray: #183a37;
       --wheat: #efd6ac;
       --mahogany: #c44900;
       --dark-purple: #432534; */
    --bg: #04151F;           /* rich black */
    --surface: #183A37;      /* dark slate gray */
    --muted: #0E2426;        /* deeper surface for controls */
    --border: #22514D;       /* slightly brighter edge */
    --text: #EFD6AC;         /* wheat */
    --text-dim: color-mix(in oklab, #EFD6AC 70%, #183A37); /* muted wheat */
    --accent: #C44900;       /* mahogany */
    --accent-hover: #D85A12; /* lighter mahogany */
    --success: #73C088;      /* soft green that fits vintage */
    --warning: #EFC46E;      /* warm gold */
    --danger: #C86C86;       /* vintage rose */
    --badge-in: #73C088;
    --badge-out: #C86C86;
    --sphere-ideell: #C44900;  /* accent */
    --sphere-zweck: #EFD6AC;   /* wheat */
    --sphere-vermoegen: #432534;/* dark purple */
    --sphere-wgb: #183A37;     /* dark slate */
    --pm-bar: #EFD6AC;        /* wheat */
    --pm-bank: #C44900;       /* accent */
}

html,
body,
#root {
    height: 100%;
    min-width: 1264px; /* safety net: matches BrowserWindow minWidth incl. left sidebar */
}

body {
    margin: 0;
    background: var(--bg);
    color: var(--text);
    font-family: Inter, "Plus Jakarta Sans", Segoe UI, system-ui, -apple-system, sans-serif;
    line-height: 1.4;
}

h1 {
    font-size: 24px;
    margin: 0 0 8px;
}

h2 {

/* Subtle hover highlight for buttons used in Setup Wizard */
.btn.hover-highlight:hover {
    background: color-mix(in oklab, var(--accent) 16%, transparent);
    box-shadow: 0 0 0 1px color-mix(in oklab, var(--accent) 30%, transparent) inset;
    transition: background 120ms ease, box-shadow 120ms ease;
}
    font-size: 18px;
    margin: 24px 0 8px;
}

code,
pre {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
}

.container {
    padding: 16px 24px;
}

/* Scrollbar styling: darker track and subtle thumb to match theme */
:root {
    /* Firefox */
    scrollbar-width: thin;
    scrollbar-color: color-mix(in oklab, var(--text) 25%, transparent) color-mix(in oklab, var(--surface) 92%, transparent);
}

/* Chromium/WebKit */
*::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}
*::-webkit-scrollbar-track {
    background: color-mix(in oklab, var(--surface) 92%, transparent);
    border-radius: 10px;
}
*::-webkit-scrollbar-thumb {
    background: color-mix(in oklab, var(--text) 25%, transparent);
    border-radius: 10px;
    border: 2px solid transparent; /* creates some spacing from edges */
    background-clip: padding-box;
}
*::-webkit-scrollbar-thumb:hover {
    background: color-mix(in oklab, var(--text) 35%, transparent);
}
*::-webkit-scrollbar-thumb:active {
    background: color-mix(in oklab, var(--accent) 40%, var(--text) 20%);
}
*::-webkit-scrollbar-corner {
    background: color-mix(in oklab, var(--surface) 92%, transparent);
}

.btn {
    border: 0;
    border-radius: 10px;
    padding: 8px 12px; /* default buttons with label */
    font-weight: 600;
    background: var(--muted);
    color: var(--text);
    cursor: pointer;
}

/* Icon-only buttons: remove padding so focus/hover outline centers on icon square */
.btn.icon,
.btn.ghost[style*="place-items: center"],
.btn.danger[style*="place-items: center"] {
    padding: 0;
}

.btn.primary {
    background: var(--accent);
    color: #0B0E14;
}

.btn.primary:hover {
    background: var(--accent-hover);
}

.btn.ghost {
    background: transparent;
}

.btn.danger {
    background: color-mix(in oklab, var(--danger) 45%, transparent);
    color: #fff;
}

.btn.danger:hover {
    background: color-mix(in oklab, var(--danger) 60%, transparent);
}

.card {
    background: color-mix(in oklab, var(--surface) 85%, transparent);
    -webkit-backdrop-filter: var(--blur);
    backdrop-filter: var(--blur);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: var(--shadow-1);
    padding: 16px;
}

/* Prevent nested cards or long lists inside tiles from visually "growing" the tile without bounds */
.card .card {
    background: color-mix(in oklab, var(--surface) 92%, transparent);
}

/* Constrain dashboard mini-tables inside tiles */
.card table {
    width: 100%;
}

.badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 999px;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.3px;
    border: 0; /* keep badges flat */
}

/* Ensure clickable badges (rendered as <button class="badge">) stay flat and accessible */
button.badge {
    -webkit-appearance: none;
    appearance: none;
    border: 0;
    background: transparent; /* background is set via inline style or variant classes */
    cursor: pointer;
}
button.badge::-moz-focus-inner { border: 0; }
button.badge:focus { outline: none; }
button.badge:focus-visible {
    /* subtle focus ring that matches theme without 3D look */
    box-shadow: 0 0 0 2px color-mix(in oklab, var(--accent) 38%, transparent);
}
button.badge:hover { filter: brightness(1.03); }

.badge.in {
    background: color-mix(in oklab, var(--badge-in) 25%, transparent);
    color: var(--badge-text);
}

.badge.out {
    background: color-mix(in oklab, var(--badge-out) 25%, transparent);
    color: var(--badge-text);
}

.badge.transfer {
    background: color-mix(in oklab, var(--accent) 25%, transparent);
    color: var(--badge-text);
}

.badge.sphere-ideell {
    background: color-mix(in oklab, var(--sphere-ideell) 20%, transparent);
    color: var(--badge-text);
}

.badge.sphere-zweck {
    background: color-mix(in oklab, var(--sphere-zweck) 25%, transparent);
    color: var(--badge-text);
}

.badge.sphere-vermoegen {
    background: color-mix(in oklab, var(--sphere-vermoegen) 25%, transparent);
    color: var(--badge-text);
}

.badge.sphere-wgb {
    background: color-mix(in oklab, var(--sphere-wgb) 25%, transparent);
    color: var(--badge-text);
}

.badge.pm-bar {
    background: color-mix(in oklab, var(--pm-bar) 36%, transparent);
    color: #0f2a14;
}

.badge.pm-bank {
    background: color-mix(in oklab, var(--pm-bank) 36%, transparent);
    color: #0B0E14;
}

/* Force SVG icons inside payment badges to use a lighter stroke for better contrast */
.badge.pm-bar svg,
.badge.pm-bank svg {
    stroke: color-mix(in oklab, var(--text) 36%, var(--surface) 0%);
}

/* Make SVG icons inside badges align nicely */
.badge svg {
    display: block;
}
.badge .icon-inline {
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th,
td {
    border-bottom: 1px solid var(--border);
}


.journal-table th,
.journal-table td {
    border-bottom: 1px solid var(--table-row-sep);
}

.journal-table tbody tr:nth-child(even) {
    background: var(--table-row-alt);
}

tbody tr:hover {
    background: color-mix(in oklab, var(--muted) 20%, transparent);
}

/* Row layout toggles for Buchungen (journal) via root data attributes */
/* Default (no attribute or 'both'): keep lines and zebra as defined above */
/* Only lines: remove zebra background */
:root[data-journal-row-style="lines"] .journal-table tbody tr:nth-child(even) { background: transparent; }
/* Make lines more pronounced in 'lines' mode */
:root[data-journal-row-style="lines"] .journal-table th,
:root[data-journal-row-style="lines"] .journal-table td {
    /* Match invoice table look: thin and not bright */
    border-bottom-color: var(--border);
    border-bottom-style: solid;
    border-bottom-width: 1px;
}
/* Only zebra: remove row separators */
:root[data-journal-row-style="zebra"] .journal-table th,
:root[data-journal-row-style="zebra"] .journal-table td { border-bottom: 0; }
/* None: no zebra and no separators */
:root[data-journal-row-style="none"] .journal-table th,
:root[data-journal-row-style="none"] .journal-table td { border-bottom: 0; }
:root[data-journal-row-style="none"] .journal-table tbody tr:nth-child(even) { background: transparent; }

/* Slightly strengthen lines when both zebra + lines are active */
:root[data-journal-row-style="both"] .journal-table th,
:root[data-journal-row-style="both"] .journal-table td {
    /* Same subtle separator as invoice table */
    border-bottom-color: var(--border);
    border-bottom-style: solid;
    border-bottom-width: 1px;
}

/* Density control: compact reduces cell padding */
:root[data-journal-row-density="compact"] .journal-table th,
:root[data-journal-row-density="compact"] .journal-table td { padding-top: 2px; padding-bottom: 2px; }

/* Sticky headers for Buchungen (journal) and Rechnungen tables */
.journal-table thead th,
.invoices-table thead th {
    position: sticky;
    top: -16px;
    background: var(--surface);
    z-index: 2;
}
/* Bottom accent line using ::after pseudo-element */
.journal-table thead th::after,
.invoices-table thead th::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 1.5px;
    background: var(--accent);
    z-index: 3;
}
/* Enhanced shadow when scrolling to make header stand out */
.journal-table thead th { 
    box-shadow: 
        0 2px 8px -1px rgba(0,0,0,0.2),
        0 4px 12px -2px rgba(0,0,0,0.15),
        0 1px 0 0 var(--table-row-sep); 
}
.invoices-table thead th { 
    box-shadow: 
        0 2px 8px -1px rgba(0,0,0,0.2),
        0 4px 12px -2px rgba(0,0,0,0.15),
        0 1px 0 0 var(--border); 
}

/* Brutto colorization in journal table */
td.gross-in {
    color: var(--success-strong);
    /* vibrant green */
    font-weight: 600;
}

td.gross-out {
    color: var(--danger-strong);
    /* vibrant red */
    font-weight: 600;
}

td.gross-transfer {
    color: var(--transfer-strong);
    /* dark goldenrod for visibility on both themes */
    font-weight: 700;
}

/* Sort indicator icons for table headers/buttons */
.sort-icon {
    display: inline-block;
    font-size: 0.9em;
    opacity: 0.9;
    margin-left: 4px;
}
.sort-icon.inactive {
    opacity: 0.6;
}

/* Transfer amount input highlight */
.input-transfer {
    background: color-mix(in oklab, var(--warning) 20%, var(--surface));
    border-color: color-mix(in oklab, var(--warning) 40%, var(--border));
}

/* Ensure SVG chart labels use app text color */
svg text {
    fill: var(--text);
}

.modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.4);
    display: flex;
    align-items: flex-start;
    justify-content: center;
    padding-top: 10vh;
    /* Ensure overlay sits above header (z-index: 1000), FAB (3000), and most overlays */
    z-index: 5000; /* below toasts (9999) */
}

.modal {
    width: min(720px, 96vw);
    background: color-mix(in oklab, var(--surface) 80%, transparent);
    -webkit-backdrop-filter: var(--blur);
    backdrop-filter: var(--blur);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: var(--shadow-1);
    padding: 16px;
    max-height: 80vh;
    overflow: auto;
}

/* Wider layout for Quick-Add (Buchung) modal */
.booking-modal {
    width: min(1100px, 96vw);
    max-height: 90vh;
}

/* Wider Members modal similar to booking */
.member-modal {
    width: min(1100px, 96vw);
    max-height: 90vh;
}

/* Two-column layout for Basis + Finanzen blocks */
.booking-modal .block-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

/* Booking modal visual refinements */
.booking-section {
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 12px;
    background: color-mix(in oklab, var(--surface) 92%, transparent);
    display: grid;
    gap: 10px;
}
.booking-section > .helper.title {
    font-weight: 600;
    opacity: .9;
    margin: 0 0 4px;
}
.booking-section--basis,
.booking-section--finances,
.booking-section--meta,
.booking-section--attachments { border-left: 4px solid var(--border); }

.booking-type-row .segment-group,
.booking-pay-row .segment-group {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}
.segment-group .seg-btn {
    padding: 6px 14px;
    border-radius: 12px;
    background: color-mix(in oklab, var(--surface) 85%, transparent);
    border: 1px solid var(--border);
    font-weight: 500;
    line-height: 1.1;
    cursor: pointer;
    transition: background .15s ease, box-shadow .15s ease, border-color .15s ease;
}
.segment-group .seg-btn.active {
    background: color-mix(in oklab, var(--accent) 20%, var(--surface));
    border-color: var(--accent);
    box-shadow: 0 0 0 1px color-mix(in oklab, var(--accent) 50%, transparent);
}
.segment-group .seg-btn[data-type="IN"],
.segment-group .seg-btn[data-type="OUT"],
.segment-group .seg-btn[data-type="TRANSFER"] { color: var(--text); }
.segment-group .seg-btn:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

.booking-meta-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}
@media (max-width: 1040px) {
    .booking-meta-grid { grid-template-columns: 1fr; }
}

@media (max-width: 1040px) {
    .booking-modal .block-grid {
        grid-template-columns: 1fr;
    }
}

/* Responsive tweaks similar to invoice modal */
@media (max-width: 1040px) {
    .booking-modal {
        width: min(96vw, 100%);
        padding: 12px;
    }
}
@media (max-width: 880px) {
    .booking-modal {
        width: min(96vw, 100%);
        padding: 12px;
    }
}

.row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

/* In the wider booking modal, allow denser grids */
.booking-modal .row {
    grid-template-columns: repeat(2, 1fr);
}
/* First finance row: select + amount + VAT tighter layout */
.booking-section--finances .row:first-of-type {
    grid-template-columns: auto 1fr auto;
    align-items: end;
}

@media (max-width: 1040px) {
    .booking-modal .row {
        grid-template-columns: 1fr 1fr; /* fall back to 2 cols on narrower screens */
    }
}
@media (max-width: 720px) {
    .booking-modal .row {
        grid-template-columns: 1fr; /* single column on small screens */
    }
}

.field {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.input,
select,
textarea {
    background: var(--surface);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 8px 10px;
    font-family: inherit;
}

/* Ensure date inputs use same UI font */
input[type="date"] {
    font-family: inherit;
}

/* Chromium: tune calendar icon for dark backgrounds */
:root[data-theme="dark"] input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(1) brightness(1.1) contrast(0.9);
}

/* Improve focus ring visibility against dark surfaces */
:root[data-theme="dark"] input[type="date"]:focus {
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 28%, transparent);
}

/* Input adornments (prefix/suffix like €) */
.adorn-wrap {
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.adorn-wrap .input { width: 100%; }
/* Unified amount input sizing; euro now sits outside as separate inline element */
.amount-input { width: 400px; }

/* VAT input narrower */
.booking-section--finances input[type="number"][step="0.1"] { width: 110px; }

/* Remove previous transfer-specific width rule */

.adorn-suffix {
    color: var(--text-dim);
    font-weight: 600;
    padding-left: 4px;
    -webkit-user-select: none;
    user-select: none;
}

/* Hide native number input spinners for amount fields */
.amount-input::-webkit-outer-spin-button,
.amount-input::-webkit-inner-spin-button,
.input-transfer::-webkit-outer-spin-button,
.input-transfer::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
.amount-input { -moz-appearance: textfield; appearance: textfield; }
.input-transfer { -moz-appearance: textfield; appearance: textfield; }

/* Make the calendar icon visible on dark themes */
input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(0.85);
    opacity: .9;
}

.helper {
    color: var(--text-dim);
    font-size: 12px;
}

/* Visual indicator for required fields */
.required-asterisk {
    color: var(--danger);
    font-weight: 700;
    margin-left: 4px;
}

/* Chips for active filters */
.chip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 8px;
    border-radius: 999px;
    background: var(--muted);
    border: 1px solid var(--border);
    font-size: 12px;
}

.chip .chip-x,
.chip-x {
    border: 0;
    background: transparent;
    color: var(--text-dim);
    cursor: pointer;
}

/* Brief flash highlight for newly created/updated rows */
@keyframes rowFlash {
    0% { background-color: color-mix(in oklab, var(--accent) 45%, transparent); }
    100% { background-color: transparent; }
}

tbody tr.row-flash {
    animation: rowFlash 2.4s ease-out 1;
}

/* Toast notifications */
.toast-container {
    position: fixed;
    right: 16px;
    bottom: 16px;
    display: grid;
    gap: 8px;
    z-index: 9999;
}

.toast {
    background: color-mix(in oklab, var(--surface) 92%, transparent);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 10px 12px;
    box-shadow: var(--shadow-1);
    color: var(--text);
    min-width: 260px;
    max-width: 560px;
    display: flex;
    align-items: flex-start;
    gap: 8px;
    flex-wrap: wrap; /* allow long text and action to wrap to the next line */
}

.toast.success {
    border-left: 4px solid var(--success);
}

.toast.error {
    border-left: 4px solid var(--danger);
}

.toast .title {
    font-weight: 700;
    margin-right: 6px;
}

/* Ensure action buttons in toasts are visible when text is long */
.toast .btn {
    flex: 0 0 auto;
}

/* Activity list icon wrapper */
.activity-icon {
    display: inline-flex;
    width: 18px;
    height: 18px;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto;
}

/* Chart legends outside SVG */
.legend {
    display: inline-flex;
    align-items: center;
    gap: 12px;
    color: var(--text-dim);
    font-size: 12px;
}

.legend-item {
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.legend-swatch {
    width: 10px;
    height: 10px;
    border-radius: 2px;
    border: 1px solid var(--border);
    display: inline-block;
}

/* Inputs hover/focus for better affordance */
.input:hover,
select:hover,
textarea:hover {
    border-color: color-mix(in oklab, var(--accent) 35%, var(--border));
}

.input:focus,
select:focus,
textarea:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 25%, transparent);
}

/* Import mapping: grouped layout */
.group-grid {
    display: grid;
    /* Larger min size to avoid horizontal overlap of dropdowns */
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 12px;
}

.field-group {
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 10px;
    background: color-mix(in oklab, var(--surface) 88%, transparent);
}

.field-group>.group-title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 700;
    margin-bottom: 8px;
}

.field-group .field {
    margin-top: 8px;
}

/* Field rows in mapping: label + control with responsive wrapping */
.field-row {
    display: grid;
    grid-template-columns: 1fr minmax(140px, 1fr);
    align-items: center;
    gap: 8px;
}

.field-row>.field-label {
    min-width: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.field-row select,
.field-row .input {
    width: 100%;
    min-width: 0;
}

.fg-meta {
    border-left: 4px solid color-mix(in oklab, var(--accent) 70%, transparent);
}

.fg-amounts {
    border-left: 4px solid color-mix(in oklab, var(--success) 60%, transparent);
}

.fg-payment {
    border-left: 4px solid color-mix(in oklab, #A0D6FF 60%, transparent);
}

.fg-accounts {
    border-left: 4px solid color-mix(in oklab, #F5C451 60%, transparent);
}

.fg-defaults {
    border-left: 4px solid color-mix(in oklab, #AAB3C2 60%, transparent);
}

.muted-sep {
    height: 1px;
    background: var(--border);
    margin: 8px 0;
}

.badge-default {
    display: inline-block;
    padding: 2px 6px;
    border-radius: 999px;
    font-size: 11px;
    background: color-mix(in oklab, var(--accent) 18%, transparent);
    color: #0B0E14;
    border: 1px solid color-mix(in oklab, var(--accent) 30%, var(--border));
}

.mapping-summary {
    display: grid;
    gap: 6px;
    border: 1px dashed var(--border);
    border-radius: 10px;
    padding: 10px;
}

.mapping-summary .pair {
    display: flex;
    gap: 8px;
    justify-content: space-between;
}

.mapping-summary .k {
    color: var(--text-dim);
}

.mapping-summary .v {
    max-width: 60%;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
}

/* Inline label + control pairing to avoid line breaks between them */
.inline-field {
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

/* Floating Action Button (FAB) for + Buchung */
.fab {
    position: fixed;
    right: 24px;
    bottom: 24px;
    z-index: 3000;
    /* above cards and tables, below toasts (9999) */
    border: none;
    border-radius: 14px;
    font-weight: 800;
    padding: 14px 20px;
    font-size: 16px;
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.35);
    opacity: 0.90;
    cursor: pointer;
}

.fab-buchung {
    background: var(--accent);
    color: #0B0E14;
}

.fab-buchung:hover {
    background: var(--accent-hover);
    color: #0B0E14;
}

/* Base sizing for invoice modal fields (prevent over-stretching) */
.invoice-modal .party-input { max-width: 500px; }
.invoice-modal .amount-input { max-width: 360px; }
.invoice-modal .tags-editor .input { max-width: 680px; }

/* Responsive tweaks for the invoice modal at minimal widths */
@media (max-width: 1040px) {
    .invoice-modal {
        width: min(96vw, 100%);
        padding: 12px;
    }
    .invoice-modal .party-input {
        max-width: 260px; /* narrower Partei at minimal app width */
    }
    .invoice-modal .amount-input {
        max-width: 220px; /* narrower Betrag at minimal app width */
    }
    .invoice-modal .tags-editor .input {
        max-width: 520px; /* cap tags row to avoid stretching */
    }
}
@media (max-width: 880px) {
    .invoice-modal {
        width: min(96vw, 100%);
        padding: 12px;
    }
    .invoice-modal .party-input {
        max-width: 320px;
    }
    .invoice-modal .amount-input {
        max-width: 260px;
    }
    .invoice-modal .tags-editor .input {
        /* tighten the inline container to avoid overflow */
        padding: 6px 8px;
    }
}

@media (max-width: 720px) {
    .invoice-modal .party-input {
        max-width: 260px;
    }
    .invoice-modal .amount-input {
        max-width: 220px;
    }
}

/* Generic Suspense fallback styling (used by root App wrapper) */
.suspense-fallback {
    min-height: 100vh;
    display: grid;
    place-items: center;
    color: var(--text-dim);
    font-family: system-ui, sans-serif;
}
.suspense-box {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}
.suspense-text {
    font-weight: 600;
}
.spinner {
    width: 28px;
    height: 28px;
    border: 3px solid var(--border);
    border-top-color: var(--accent);
    border-radius: 50%;
    animation: spin 0.9s linear infinite;
}
@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Top header organisation line */
.top-header-org {
    display: inline-flex;
    align-items: center;
    gap: 8px;
}
.top-header-org__logo {
    border-radius: 4px;
    display: block;
}
.top-header-org__text {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Window controls in titlebar */
.window-controls {
    display: inline-flex;
    gap: 4px;
    justify-self: end;
}
.window-controls__btn {
    width: 28px;
    height: 28px;
    padding: 0;
    display: grid;
    place-items: center;
    border-radius: 8px;
}

/* Electron-specific note: app-region is applied inline to avoid CSS linter false positives */

/* Sidebar navigation */
.sidebar-nav {
    display: flex;
    flex-direction: column;
    gap: 6px;
}
.nav-separator {
    height: 1px;
    background: var(--border);
    margin: 6px 0;
}
.nav-separator--lg {
    margin: 8px 0;
}
.sidebar-button__icon {
    width: 22px;
    display: inline-flex;
    justify-content: center;
}
.btn.ghost.is-active {
    background: color-mix(in oklab, var(--accent) 15%, transparent);
}
/* Icon color classes (used when navIconColorMode === 'color') */
.icon-color-Dashboard { color: #7C4DFF; }
.icon-color-Buchungen { color: #2962FF; }
.icon-color-Rechnungen { color: #00B8D4; }
.icon-color-Mitglieder { color: #26A69A; }
.icon-color-Budgets { color: #00C853; }
.icon-color-Zweckbindungen { color: #FFD600; }
.icon-color-Belege { color: #FF9100; }
.icon-color-Reports { color: #F50057; }
.icon-color-Einstellungen { color: #9C27B0; }

/* ==========================
   App layout shell helpers
   ========================== */
.app-root-grid {
    display: grid;
    grid-template-rows: 56px 1fr;
    height: 100vh;
    overflow: hidden;
}
.app-header {
    grid-area: top;
    position: sticky;
    top: 0;
    z-index: 1000;
    display: grid;
    align-items: center;
    gap: 12px;
    padding: 4px 8px;
    border-bottom: 1px solid var(--border);
    -webkit-backdrop-filter: var(--blur);
    backdrop-filter: var(--blur);
    background: color-mix(in oklab, var(--surface) 50%, transparent);
}
.app-header-top { grid-template-columns: 1fr auto 1fr 104px; }
.app-header-left { grid-template-columns: 1fr 104px; }
.no-drag { pointer-events: auto; }
.header-left-group { display: inline-flex; align-items: center; gap: 6px; }
.top-nav { display: inline-flex; align-items: center; gap: 6px; justify-self: center; }
.side-nav { display: flex; flex-direction: column; gap: 4px; }
.nav-btn { width: 36px; height: 36px; padding: 0; display: grid; place-items: center; border-radius: 10px; }
.nav-btn.active { background: color-mix(in oklab, var(--accent) 15%, transparent); }
.nav-divider { width: 1px; height: 20px; background: var(--border); align-self: center; }
.side-nav .nav-divider { width: auto; height: 1px; margin: 6px 0; }
.top-nav .divider-v { width: 1px; height: 20px; margin: 0; background: var(--border); }
.nav-label { font-size: 14px; }
.icon-wrapper { width: 22px; display: inline-flex; justify-content: center; align-items: center; }
.app-sidebar { grid-area: side; display: flex; flex-direction: column; padding: 8px; border-right: 1px solid var(--border); overflow-y: auto; }
.side-nav-btn { text-align: left; display: flex; align-items: center; gap: 10px; }
.app-main { grid-area: main; padding: 16px; overflow-y: auto; }
.app-logo { border-radius: 4px; display: block; }
.toast-row { display: flex; align-items: center; gap: 12px; }
.modal-wide { width: min(96vw, 1200px); max-width: 1200px; display: grid; gap: 10px; }
.inline-helpers-row { display: flex; align-items: baseline; gap: 10px; flex-wrap: wrap; margin-top: 2px; }
.row-between { display: flex; justify-content: space-between; align-items: center; }
.min-w-140 { min-width: 140px; }
.tags-input-inline { flex: 1; min-width: 120px; border: none; outline: none; background: transparent; color: var(--text); }
.suggestions-palette { padding: 6px; margin-top: 6px; display: flex; gap: 6px; flex-wrap: wrap; }
.tags-input { display: flex; flex-wrap: wrap; gap: 6px; align-items: center; min-height: 34px; }
.col-span-2 { grid-column: 1 / span 2; }
.timeline-scroll { margin-top: 8px; overflow-x: auto; }
.desc-span { min-width: 160px; flex: 1 1 auto; }
.badge-center { display: inline-grid; place-items: center; }

/* Charts shared helpers */
.chart-card {
    padding: 12px;
    overflow: hidden;
}

.chart-head {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 6px;
}

.chart-canvas {
    position: relative;
}

.chart-loading {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
}

/* Dashboard: subtle tinted cards for clearer visual separation */
.card--accent {
    background: color-mix(in oklab, var(--accent) 10%, var(--surface));
    border-left: 4px solid var(--accent);
}
.card--success {
    background: color-mix(in oklab, var(--success) 10%, var(--surface));
    border-left: 4px solid var(--success);
}
.card--danger {
    background: color-mix(in oklab, var(--danger) 10%, var(--surface));
    border-left: 4px solid var(--danger);
}

/* Small colored swatch for legends */
.swatch-dot {
    width: 10px;
    height: 10px;
    border-radius: 3px;
    display: inline-block;
}

/* Loading spinner animation */
@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Required field asterisk marker */
.req-asterisk {
    color: var(--danger);
    font-weight: 700;
    margin-left: 4px;
    font-size: 0.9em;
    line-height: 1;
}
label .req-asterisk {
    vertical-align: middle;
}

/* ============================================================================
   Utility Classes - Häufig verwendete Layout-Patterns
   ============================================================================ */

/* Flex Utilities */
.flex { display: flex; }
.inline-flex { display: inline-flex; }
.flex-col { display: flex; flex-direction: column; }
.flex-wrap { flex-wrap: wrap; }
.items-center { align-items: center; }
.items-start { align-items: flex-start; }
.items-end { align-items: flex-end; }
.items-baseline { align-items: baseline; }
.justify-start { justify-content: flex-start; }
.justify-end { justify-content: flex-end; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.flex-1 { flex: 1; }
.flex-auto { flex: 1 1 auto; }

/* Gap Utilities */
.gap-4 { gap: 4px; }
.gap-6 { gap: 6px; }
.gap-8 { gap: 8px; }
.gap-10 { gap: 10px; }
.gap-12 { gap: 12px; }
.gap-16 { gap: 16px; }

/* Grid Utilities */
.grid { display: grid; }
.inline-grid { display: inline-grid; }
.place-items-center { place-items: center; }
.place-content-center { place-content: center; }

/* Common Layout Patterns */
.icon-btn {
    width: 28px;
    height: 28px;
    padding: 0;
    display: grid;
    place-items: center;
    border-radius: 8px;
}

.icon-btn-sm {
    width: 24px;
    height: 24px;
    padding: 0;
    display: inline-grid;
    place-items: center;
    border-radius: 6px;
}

.icon-btn-md {
    width: 32px;
    height: 32px;
    padding: 0;
    display: grid;
    place-items: center;
}

.icon-btn-lg {
    width: 36px;
    height: 36px;
    padding: 0;
    display: grid;
    place-items: center;
    border-radius: 10px;
}

/* Dividers */
.divider-h {
    height: 1px;
    background: var(--border);
    margin: 6px 0;
}

.divider-v {
    display: inline-block;
    width: 1px;
    height: 24px;
    background: var(--border);
    margin: 0 8px;
}

/* Icon/Text Centering */
.icon-wrapper {
    width: 22px;
    display: inline-flex;
    justify-content: center;
}

/* Text Utilities */
.text-ellipsis {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.text-nowrap { white-space: nowrap; }
.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }

/* Spacing Utilities */
.m-0 { margin: 0; }
.mt-2 { margin-top: 2px; }
.mt-4 { margin-top: 4px; }
.mt-6 { margin-top: 6px; }
.mt-8 { margin-top: 8px; }
.mt-12 { margin-top: 12px; }
.mb-6 { margin-bottom: 6px; }
.mb-8 { margin-bottom: 8px; }
.ml-6 { margin-left: 6px; }
.ml-auto { margin-left: auto; }

.p-8 { padding: 8px; }
.p-10 { padding: 10px; }
.p-12 { padding: 12px; }

/* Overflow Utilities */
.overflow-auto { overflow: auto; }
.overflow-x-auto { overflow-x: auto; }
.overflow-y-auto { overflow-y: auto; }

/* Common Width/Height */
.w-full { width: 100%; }
.h-full { height: 100%; }

/* Opacity */
.opacity-60 { opacity: 0.6; }
.opacity-85 { opacity: 0.85; }

/* Font Weight */
.font-semibold { font-weight: 600; }
.font-medium { font-weight: 500; }

/* Cursor */
.cursor-pointer { cursor: pointer; }
.cursor-not-allowed { cursor: not-allowed; }

/* Word Break */
.word-break-all { word-break: break-all; }
.user-select-all { -webkit-user-select: all; user-select: all; }

/* ========================================
   BindingModal - Specific CSS Classes
   ======================================== */

/* Field with full width span across two columns */
.field-full-width {
    grid-column: 1 / span 2;
}

/* Color picker container */
.color-picker-container {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

/* Color swatch button */
.color-swatch-btn {
    padding: 0;
    width: 28px;
    height: 28px;
    border-radius: 6px;
}

.color-swatch-selected {
    border: 2px solid var(--text);
}

.color-swatch-unselected {
    border: 2px solid transparent;
}

/* Custom color button */
.custom-color-btn {
    height: 28px;
}

/* Modal footer actions */
.modal-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 8px;
    margin-top: 12px;
}

.modal-actions {
    display: flex;
    gap: 8px;
}

/* Delete confirmation modal */
.delete-modal {
    max-width: 520px;
    display: grid;
    gap: 12px;
}

.delete-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.delete-modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: 8px;
}

/* Color picker modal */
.color-picker-modal {
    max-width: 420px;
    display: grid;
    gap: 12px;
}

.color-picker-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.color-input-native {
    width: 60px;
    height: 36px;
    padding: 0;
    border: 1px solid var(--border);
    border-radius: 6px;
    background: transparent;
}

.color-preview-card {
    padding: 8px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.color-preview-swatch {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    border: 1px solid var(--border);
}

.contrast-sample {
    padding: 2px 6px;
    border-radius: 6px;
}

.error-text {
    color: var(--danger);
}

/* ========================================
   BudgetModal - Specific CSS Classes
   ======================================== */

/* Date range container spanning 2 columns */
.date-range-container {
    grid-column: 1 / span 2;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
}

/* Input with error state */
.input-error {
    border-color: var(--danger);
}

/* ========================================
   Report Charts - Common CSS Classes
   ======================================== */

/* Chart card wrapper */
.report-chart-card {
    margin-top: 12px;
    padding: 12px;
}

    /* Chart card with overflow hidden */
    .chart-card-overflow {
        padding: 12px;
        overflow: hidden;
    }

    /* Helper with top margin */
    .helper-mt-6 {
        margin-top: 6px;
    }

        /* ========================================
           Dashboard - Common CSS Classes
           ======================================== */

        /* Dashboard main card */
        .dashboard-card {
            padding: 12px;
            display: grid;
            gap: 12px;
        }

        /* Dashboard header flex */
        .dashboard-header {
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            gap: 8px;
        }

        /* Dashboard title */
        .dashboard-title {
            font-size: 18px;
            font-weight: 600;
        }

        /* Quote section */
        .dashboard-quote {
            text-align: right;
            max-width: 520px;
        }

        .dashboard-quote-text {
            font-style: italic;
        }

        /* Auto-fit grid for cards */
        .dashboard-grid-auto {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
        }

        /* Period selector row */
        .dashboard-period-row {
            grid-column: 1 / -1;
            display: flex;
            justify-content: flex-end;
            gap: 8px;
            align-items: center;
        }

        /* Button with active state */
        .btn-period-active {
            background: color-mix(in oklab, var(--accent) 20%, transparent);
            color: var(--accent);
            font-weight: 600;
        }

        /* Summary card with padding */
        .summary-card {
            padding: 12px;
        }

        /* Summary value - bold */
        .summary-value {
            font-weight: 600;
        }

        /* Summary value with dynamic color */
        .summary-value-overflow {
            font-weight: 600;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* Invoice card with warning color */
        .invoice-card-warning {
            padding: 10px;
            min-width: 0;
        }

        .invoice-card-danger {
            padding: 10px;
            border-left: 4px solid var(--danger);
            min-width: 0;
        }

        /* Invoice list container */
        .invoice-list-container {
            margin-top: 6px;
            max-height: 180px;
            overflow-y: auto;
            display: grid;
            gap: 4px;
        }

        /* Invoice item row */
        .invoice-item-row {
            cursor: pointer;
            display: grid;
            grid-template-columns: 120px 1fr auto;
            align-items: center;
            padding: 4px 8px;
            border: 1px solid var(--border);
            border-radius: 8px;
        }

            /* Text utilities */
            .text-right-bold {
                text-align: right;
                font-weight: 600;
            }

        /* ============================================
           QuickAddModal Utility Classes
           ============================================ */
        
        /* Modal header with close button */
        .modal-header-flex {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .modal-header-flex h2 {
            margin: 0;
        }

        /* Summary card padding */
        .summary-card {
            padding: 10px;
            margin-bottom: 8px;
        }

        .summary-text-bold {
            font-weight: 600;
        }

        /* Block grid spacing */
        .block-grid-mb {
            margin-bottom: 8px;
        }

        /* Card padding for form blocks */
        .form-card {
            padding: 12px;
        }

        /* Helper text spacing */
        .helper-mb {
            margin-bottom: 6px;
        }

        /* Flex row with gap 8 */
        .flex-gap-8 {
            display: flex;
            gap: 8px;
        }

        /* Full width field */
        .field-full-width {
            grid-column: 1 / -1;
        }

        /* Flex 1 for growing elements */
        .flex-1 {
            flex: 1;
        }

        /* Button active state for type/payment method toggles */
        .btn-toggle-active {
            /* Stronger highlight background for active toggle buttons */
            background: linear-gradient(180deg, color-mix(in oklab, var(--accent) 78%, var(--surface)), color-mix(in oklab, var(--accent) 58%, var(--surface)));
            color: #fff; /* ensure selected state text is clearly visible (e.g., Zahlweg) */
            box-shadow: 0 0 0 1px color-mix(in oklab, var(--accent) 65%, transparent) inset, 0 1px 2px rgba(0,0,0,.35);
        }

        .btn-type-in {
                    color: var(--success);
        }

        .btn-type-out {
                    color: var(--danger);
        }

        /* Semantic active states for type buttons (IN/OUT) */
        .btn-type-in.btn-toggle-active {
            background: linear-gradient(180deg, color-mix(in oklab, var(--success) 80%, var(--surface)), color-mix(in oklab, var(--success) 60%, var(--surface)));
            color: #fff;
            box-shadow: 0 0 0 1px color-mix(in oklab, var(--success) 65%, transparent) inset, 0 1px 2px rgba(0,0,0,.35);
        }
        .btn-type-out.btn-toggle-active {
            background: linear-gradient(180deg, color-mix(in oklab, var(--danger) 80%, var(--surface)), color-mix(in oklab, var(--danger) 60%, var(--surface)));
            color: #fff;
            box-shadow: 0 0 0 1px color-mix(in oklab, var(--danger) 65%, transparent) inset, 0 1px 2px rgba(0,0,0,.35);
        }

                /* Group container for adjacent toggle buttons (Art / Zahlweg) */
                .btn-group {
                    display: inline-flex;
                    gap: 6px; /* visual breathing room so buttons don't touch */
                }

                /* Slight scale/brightness feedback */
                .btn-group .btn:active {
                    transform: scale(.97);
                }

                /* Hover affordance for inactive toggle buttons */
                .btn-group .btn:not(.btn-toggle-active):hover {
                    background: color-mix(in oklab, var(--accent) 18%, transparent);
                }

        /* File list styles */
        .file-list {
            margin: 8px 0 0;
            padding-left: 18px;
        }

        .file-list-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .file-name {
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* Attachment card */
        .attachment-card {
            padding: 12px;
        }

        /* Attachment header */
        .attachment-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
        }

        .attachment-title {
            display: flex;
            align-items: baseline;
            gap: 8px;
        }

        /* Modal footer actions */
        .modal-footer-actions {
            display: flex;
            justify-content: space-between;
            gap: 8px;
            margin-top: 12px;
            align-items: center;
        }

            .text-overflow-ellipsis {
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
            }

        /* Overflow container */
        .overflow-container-mt {
            margin-top: 10px;
            overflow: hidden;
        }

        /* Grid with wider items */
        .dashboard-grid-wide {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 8px;
            overflow: hidden;
        }

    /* Chart header with title and legend */
.report-chart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Chart container with relative positioning for tooltip */
.chart-container-relative {
    position: relative;
}

/* Chart tooltip */
.chart-tooltip {
    position: absolute;
    top: 6px;
    left: 12px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 6px 8px;
    pointer-events: none;
    box-shadow: var(--shadow-1);
    font-size: 12px;
    z-index: 10;
}

.chart-tooltip-header {
    font-weight: 600;
    margin-bottom: 4px;
}

.chart-tooltip-row {
    display: flex;
    justify-content: space-between;
    gap: 12px;
}

/* Legend swatches - specific colors */
.legend-swatch-in {
    background: #2e7d32;
}

.legend-swatch-out {
    background: #c62828;
}

/* Donut chart specific */
.donut-chart-wrapper {
    display: flex;
    gap: 16px;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    position: relative;
}

.legend-container {
    display: flex;
    gap: 8px;
    align-items: center;
}

/* Chart header with baseline alignment */
.chart-header-baseline {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
}

/* Chart overflow container */
.chart-overflow-container {
    position: relative;
    overflow: hidden;
}

/* SVG chart max width */
.chart-svg-responsive {
    max-width: 100%;
    height: auto;
}

/* Loading overlay */
.chart-loading-overlay {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
}

/* Tooltip with dynamic positioning (left %) */
.chart-tooltip-dynamic {
    position: absolute;
    top: 8px;
    transform: translateX(-50%);
    background: var(--surface);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 6px 8px;
    pointer-events: none;
    box-shadow: var(--shadow-1);
    font-size: 12px;
}

        /* ============================================
           InvoicesView Utility Classes
           ============================================ */
        
        /* Main container */
        .invoices-container {
            padding: 12px;
            display: grid;
            gap: 12px;
        }

        /* Header row */
        .invoices-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .invoices-header h1 {
            margin: 0;
        }

        /* Filter toolbar */
        .invoices-filters {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
        }

        .invoices-search {
            width: 280px;
        }

        .filter-divider {
            width: 12px;
        }

        /* Clear filters button */
        .btn-clear-filters {
            background: var(--accent);
            color: #000;
        }

        /* Summary bar */
        .invoices-summary {
            margin-bottom: 6px;
        }

        .summary-remaining {
            margin-left: 8px;
            color: var(--text-dim);
        }

        /* Pagination */
        .invoices-pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            gap: 8px;
            flex-wrap: wrap;
        }

        .pagination-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Payment modal */
        .payment-modal-grid {
            display: grid;
            gap: 10px;
            max-width: 420px;
        }

        /* Invoice form */
        .invoice-form-grid {
            display: grid;
            gap: 12px;
        }

        .invoice-form-card {
            padding: 12px;
            display: grid;
            gap: 10px;
        }

        /* Amount input large */
        .amount-input-large {
            font-size: 24px;
            padding-top: 10px;
            padding-bottom: 10px;
        }

        /* Payment method buttons */
        .payment-method-row {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .payment-method-field {
            min-width: 160px;
        }

        .payment-method-buttons {
            display: flex;
            gap: 6px;
        }

        .payment-btn {
            width: 56px;
            justify-content: center;
        }

        .payment-btn-wide {
            width: 80px;
            justify-content: center;
        }

        /* Type buttons */
        .type-buttons-field {
            min-width: 180px;
        }

        .type-buttons {
            display: flex;
            gap: 6px;
        }

        .type-btn {
            width: 80px;
            justify-content: center;
        }

        /* Toggle active states for invoice form */
        .btn-payment-none-active {
            background: color-mix(in oklab, var(--accent) 15%, transparent);
        }

        .btn-payment-active {
            background: color-mix(in oklab, var(--accent) 25%, transparent);
        }

        .btn-type-in-active {
            background: color-mix(in oklab, var(--success) 25%, transparent);
        }

        .btn-type-out-active {
            background: color-mix(in oklab, var(--danger) 25%, transparent);
        }