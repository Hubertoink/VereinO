<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#4f46e5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Buchung einreichen â€“ VereinO</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“‹</text></svg>">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <h1>ğŸ“‹ Buchung einreichen</h1>
            <div class="header-badge" id="badge-count">0</div>
        </header>

        <!-- Main content -->
        <main class="main" id="main-view">
            <!-- Form for new submission -->
            <form id="submission-form" class="form-card">
                <div class="form-group">
                    <label for="date">Datum *</label>
                    <input type="date" id="date" required>
                </div>

                <div class="form-group">
                    <label>Art *</label>
                    <div class="btn-group">
                        <button type="button" class="btn-toggle active" data-type="OUT">Ausgabe</button>
                        <button type="button" class="btn-toggle" data-type="IN">Einnahme</button>
                    </div>
                    <input type="hidden" id="type" value="OUT">
                </div>

                <div class="form-group">
                    <label for="sphere">
                        SphÃ¤re
                        <button type="button" class="help-icon" id="sphere-help" aria-label="Hilfe zu SphÃ¤re">?</button>
                    </label>
                    <select id="sphere">
                        <option value="IDEELL" selected>Ideell</option>
                        <option value="ZWECK">Zweckbetrieb</option>
                        <option value="VERMOEGEN">VermÃ¶gensverwaltung</option>
                        <option value="WGB">Wirtschaftl. GeschÃ¤ftsbetrieb</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="amount">Betrag (â‚¬) *</label>
                    <input type="number" id="amount" step="0.01" min="0.01" placeholder="0,00" required inputmode="decimal">
                </div>

                <div class="form-group">
                    <label for="description">Beschreibung *</label>
                    <input type="text" id="description" placeholder="WofÃ¼r?" required>
                </div>

                <div class="form-group">
                    <label for="counterparty">Zahler/EmpfÃ¤nger</label>
                    <input type="text" id="counterparty" placeholder="Name des Zahlenden/EmpfÃ¤ngers">
                </div>

                <div class="form-group">
                    <label for="category">Kategorie-Hinweis</label>
                    <input type="text" id="category" placeholder="z.B. Vereinsfest, Material, etc.">
                </div>

                <!-- Image upload -->
                <div class="form-group">
                    <label>Beleg-Foto</label>
                    <div class="image-upload" id="image-upload">
                        <input type="file" id="image-input" accept="image/*" capture="environment" hidden>
                        <div class="image-preview" id="image-preview">
                            <div class="image-placeholder" id="image-placeholder">
                                <span class="icon">ğŸ“·</span>
                                <span>Foto aufnehmen oder auswÃ¤hlen</span>
                            </div>
                            <img id="preview-img" src="" alt="Vorschau" hidden>
                            <button type="button" class="btn-remove-image" id="remove-image" hidden>Ã—</button>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="submitter">Dein Name *</label>
                    <input type="text" id="submitter" placeholder="Vor- und Nachname" required>
                </div>

                <button type="submit" class="btn-primary">
                    <span class="icon">â•</span> Zur Liste hinzufÃ¼gen
                </button>
            </form>
        </main>

        <!-- Submissions list view -->
        <div id="list-view" class="list-view" hidden>
            <div class="list-header">
                <h2>Eingereichte Buchungen</h2>
                <button type="button" class="btn-back" id="btn-back">â† ZurÃ¼ck</button>
            </div>
            <div class="submissions-list" id="submissions-list"></div>
            <div class="list-actions">
                <button type="button" class="btn-secondary" id="btn-clear">ğŸ—‘ï¸ Alle lÃ¶schen</button>
                <button type="button" class="btn-primary" id="btn-download">ğŸ“¥ JSON herunterladen</button>
            </div>
            <div class="email-hint">
                <p>Nach dem Download die <code>.vereino-submission.json</code> Datei per E-Mail an den Kassier senden.</p>
            </div>
        </div>

        <!-- Bottom nav -->
        <nav class="bottom-nav">
            <button type="button" class="nav-btn active" id="nav-form">
                <span class="icon">â•</span>
                <span>Neu</span>
            </button>
            <button type="button" class="nav-btn" id="nav-list">
                <span class="icon">ğŸ“‹</span>
                <span>Liste</span>
                <span class="nav-badge" id="nav-badge">0</span>
            </button>
        </nav>

        <!-- Alert Modal (info only, single button) -->
        <div class="modal-overlay" id="alert-modal" hidden>
            <div class="modal-dialog alert-dialog">
                <div class="modal-icon" id="alert-icon">ğŸ’¡</div>
                <h3 class="modal-title" id="alert-title">Info</h3>
                <p class="modal-message" id="alert-message"></p>
                <div class="modal-actions">
                    <button type="button" class="btn-modal btn-modal-confirm" id="alert-ok">OK</button>
                </div>
            </div>
        </div>

        <!-- Confirm Modal -->
        <div class="modal-overlay" id="confirm-modal" hidden>
            <div class="modal-dialog">
                <div class="modal-icon" id="confirm-icon">âš ï¸</div>
                <h3 class="modal-title" id="confirm-title">BestÃ¤tigung</h3>
                <p class="modal-message" id="confirm-message">Sind Sie sicher?</p>
                <div class="modal-actions">
                    <button type="button" class="btn-modal btn-modal-cancel" id="confirm-cancel">Abbrechen</button>
                    <button type="button" class="btn-modal btn-modal-confirm" id="confirm-ok">OK</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>
